# ðŸš€ Interactive Geo-Spatial Map UDC (Leaflet-based)

ì´ í”„ë¡œì íŠ¸ëŠ” **Leaflet.js**ë¥¼ ê¸°ë°˜ìœ¼ë¡œ êµ¬ì¶•ëœ eXBuilder6 ì „ìš© **UDC(User Defined Control)**ìž…ë‹ˆë‹¤. ê³µê³µë°ì´í„° ë° ë‚´ë¶€ APIì˜ GeoJSON ë°ì´í„°ë¥¼ í™œìš©í•˜ì—¬ ë™ì ì¸ í–‰ì •êµ¬ì—­ ì‹œê°í™”, ë‹¨ê³„ë³„ ë“œë¦´ë‹¤ìš´, ê·¸ë¦¬ê³  ì‹¤ì‹œê°„ ì§€ë„ ë“œë¡œìž‰ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.

## ðŸ›  Tech Stack
* **Library:** Leaflet.js (v1.9.4)
* **Plugins:** Leaflet.markercluster (ë§ˆì»¤ ê·¸ë£¹í™” ë° ì„±ëŠ¥ ìµœì í™”)
* **Data Format:** GeoJSON (í–‰ì •êµ¬ì—­ ê²½ê³„), JSON (ë¹„ì¦ˆë‹ˆìŠ¤ ë°ì´í„°)
* **Platform:** eXBuilder6 UI Framework

## ðŸŒŸ Key Technical Features

### 1. ë¹„ë™ê¸° ë¦¬ì†ŒìŠ¤ ì²´ì´ë‹ (Asynchronous Resource Loading)
ë‹¨ìˆœí•œ ìŠ¤í¬ë¦½íŠ¸ íƒœê·¸ ì‚½ìž… ëŒ€ì‹  `cpr.core.ResourceLoader`ë¥¼ ì‚¬ìš©í•˜ì—¬ ì˜ì¡´ì„± ìžˆëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ë“¤ì„ ìˆœì°¨ì ìœ¼ë¡œ ë¡œë“œí•©ë‹ˆë‹¤.
* **í”„ë¡œì„¸ìŠ¤:** Leaflet ì½”ì–´ ë¡œë“œ âž” MarkerCluster í”ŒëŸ¬ê·¸ì¸ ë¡œë“œ âž” CSS ìŠ¤íƒ€ì¼ ë¡œë“œ âž” ì§€ë„ ì´ˆê¸°í™”.
* **ìž¥ì :** í•„ìš”í•œ ì‹œì ì—ë§Œ ë¦¬ì†ŒìŠ¤ë¥¼ ë¡œë“œí•˜ì—¬ ì´ˆê¸° ë¡œë”© ì†ë„ë¥¼ ê°œì„ í•˜ê³  ë¼ì´ë¸ŒëŸ¬ë¦¬ ê°„ ì‹¤í–‰ ìˆœì„œë¥¼ ë³´ìž¥í•©ë‹ˆë‹¤.

### 2. ê³ ìˆ˜ì¤€ ë“œë¦´ë‹¤ìš´ ë¡œì§ (Multi-level Drill-down)
ëŒ€í•œë¯¼êµ­ì˜ í–‰ì • ì²´ê³„ì— ë§žì¶˜ **ì‹œë„ âž” ì‹œêµ°êµ¬ âž” ìë©´ë™** 3ë‹¨ê³„ ë“œë¦´ë‹¤ìš´ì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.
* **ìƒíƒœ ìœ ì§€:** `mapConfig` ì»´í¬ë„ŒíŠ¸ì— í˜„ìž¬ì˜ ê´€ë¦¬ ë ˆë²¨(`adminLevel`)ê³¼ ë¶€ëª¨ ì½”ë“œ ì •ë³´ë¥¼ ì €ìž¥í•˜ì—¬ ë°ì´í„° ì¼ê´€ì„±ì„ ìœ ì§€í•©ë‹ˆë‹¤.
* **ë‚´ë¹„ê²Œì´ì…˜:** í•˜ìœ„ ë ˆë²¨ ì§„ìž… ì‹œ `addBackButton` í•¨ìˆ˜ë¥¼ í†µí•´ ë™ì ìœ¼ë¡œ 'ë’¤ë¡œê°€ê¸°' ì»¨íŠ¸ë¡¤ì„ ìƒì„±í•˜ì—¬ ì‚¬ìš©ìž ê²½í—˜ì„ í–¥ìƒì‹œí‚µë‹ˆë‹¤.
* **ìµœì í™”:** `fitBounds`ë¥¼ ì‚¬ìš©í•˜ì—¬ ì§€ì—­ ì´ë™ ì‹œ í•´ë‹¹ êµ¬ì—­ì˜ ê²½ê³„ê°’ì— ë§žì¶° ì§€ë„ì˜ ì¤Œ ë ˆë²¨ê³¼ ì¤‘ì‹¬ì ì„ ìžë™ ì¡°ì •í•©ë‹ˆë‹¤.

### 3. ë‹¨ê³„êµ¬ë¶„ë„ ì‹œê°í™” (Choropleth Mapping)
ë¹„ì¦ˆë‹ˆìŠ¤ ìˆ˜ì¹˜ ë°ì´í„°(`dataValues`)ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì§€ë„ ì˜ì—­ì˜ ìƒ‰ìƒì„ ë™ì ìœ¼ë¡œ í• ë‹¹í•©ë‹ˆë‹¤.
* **ìƒ‰ìƒ ì•Œê³ ë¦¬ì¦˜:** `minValue`ì™€ `maxValue`ë¥¼ ê³„ì‚°í•˜ì—¬ 5ë‹¨ê³„ ìƒ‰ìƒ ìŠ¤í‚¤ë§ˆ(Blue, Red, Green, Purple)ì— ë§¤í•‘í•˜ëŠ” ì„ í˜• ë³´ê°„ ë¡œì§ì„ ì ìš©í–ˆìŠµë‹ˆë‹¤.
* **ì¸í„°ëž™ì…˜:** ë§ˆìš°ìŠ¤ ì˜¤ë²„ ì‹œ `hoverColors`ë¥¼ ì ìš©í•˜ê³ , `bringToFront()`ë¥¼ í˜¸ì¶œí•˜ì—¬ ì„ íƒëœ ì˜ì—­ì˜ ê²½ê³„ì„ ì„ ê°•ì¡°í•©ë‹ˆë‹¤.

### 4. ì¸í„°ëž™í‹°ë¸Œ ë“œë¡œìž‰ ë° íŽ¸ì§‘ ì‹œìŠ¤í…œ
ì§€ë„ ìœ„ì— ì§ì ‘ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  íŽ¸ì§‘í•  ìˆ˜ ìžˆëŠ” ì‚¬ìš©ìž ë„êµ¬ ëª¨ìŒì„ í¬í•¨í•©ë‹ˆë‹¤.
* **Drawing Mode:** `drawState` ì „ì—­ ê°ì²´ë¡œ ìƒíƒœë¥¼ ê´€ë¦¬í•˜ë©° ë§ˆì»¤, ê²½ë¡œ(Polyline), ì»¤ìŠ¤í…€ ì´ë¯¸ì§€, ì •ë³´ íŒ¨ë„, ìŠ¤íŒŒí¬ ì°¨íŠ¸ ê¸°ëŠ¥ì„ ì§€ì›í•©ë‹ˆë‹¤.
* **Event Interception:** ë“œë¡œìž‰ ëª¨ë“œ í™œì„±í™” ì‹œ ê¸°ì¡´ ì§€ì—­ í´ë¦­ ì´ë²¤íŠ¸ë¥¼ ì°¨ë‹¨í•˜ê³  `handleMapClick`ìœ¼ë¡œ ì œì–´ê¶Œì„ ì „í™˜í•˜ì—¬ ì •êµí•œ ê°ì²´ ìƒì„±ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.
* **Custom UI:** `L.divIcon`ê³¼ SVGë¥¼ ê²°í•©í•˜ì—¬ ì‹¤ì‹œê°„ ë°ì´í„° ì¶”ì´ë¥¼ ë³´ì—¬ì£¼ëŠ” **ìŠ¤íŒŒí¬ ì°¨íŠ¸(Sparkline)**ë¥¼ ì§€ë„ ì¢Œí‘œ ìœ„ì— ë Œë”ë§í•©ë‹ˆë‹¤.

### 5. ì‹¤ì‹œê°„ ìŠ¤íƒ€ì¼ ì—ë””í„° (Popup Editor)
ì‚¬ìš©ìžê°€ íŒì—…ì°½ì„ í†µí•´ ì§ì ‘ ì§€ë„ ìš”ì†Œì˜ ìŠ¤íƒ€ì¼ì„ ë³€ê²½í•  ìˆ˜ ìžˆëŠ” ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.
* **íŽ¸ì§‘ í•­ëª©:** ì§€ì—­ ìƒ‰ìƒ, íˆ´íŒ ë°°ê²½ ë° ê¸€ìžìƒ‰, íˆ´íŒ í…ìŠ¤íŠ¸ ë‚´ìš© ë“±.
* **ë°ì´í„° ë°”ì¸ë”©:** ë³€ê²½ëœ ê°’ì€ `Feature`ì˜ `_state` ê°ì²´ì— ì¦‰ì‹œ ë°˜ì˜ë˜ë©°, `layer.bindTooltip`ì„ ìž¬ì‹¤í–‰í•˜ì—¬ ì‹¤ì‹œê°„ìœ¼ë¡œ ë°˜ì˜ë©ë‹ˆë‹¤.

## ðŸ— Logical Flow
1. **Load:** `onShl1Load`ì—ì„œ ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¡œë“œ ë° API ì—”ë“œí¬ì¸íŠ¸ ì„¤ì •.
2. **Fetch:** `loadMapData`ë¥¼ í˜¸ì¶œí•˜ì—¬ GeoJSON ë° ìˆ˜ì¹˜ ë°ì´í„° ìˆ˜ì‹ .
3. **Render:** `renderGeoJson`ì—ì„œ ìŠ¤íƒ€ì¼ ì ìš© ë° ì´ë²¤íŠ¸(Click, Hover) ë°”ì¸ë”©.
4. **Interact:** ì‚¬ìš©ìžì˜ ë“œë¦´ë‹¤ìš´ í´ë¦­ í˜¹ì€ íˆ´ë°”ë¥¼ í†µí•œ ê°ì²´ ìƒì„± ì²˜ë¦¬.

---
**Tip:** ì´ UDCë¥¼ í™œìš©í•˜ë©´ ë³„ë„ì˜ GIS ì—”ì§„ ì—†ì´ë„ ê°•ë ¥í•œ ë°ì´í„° ì‹œê°í™” ëŒ€ì‹œë³´ë“œë¥¼ êµ¬ì¶•í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.
## âš–ï¸ License & Attribution

This project is built upon several open-source libraries. For commercial use, please adhere to the following license terms:

- **Leaflet.js**: [BSD 2-Clause License](https://github.com/Leaflet/Leaflet/blob/main/LICENSE)
- **Leaflet.markercluster**: [MIT License](https://github.com/Leaflet/Leaflet.markercluster/blob/master/MIT-LICENSE.txt)
- **Map Data**: [OpenStreetMap](https://www.openstreetmap.org/copyright) (ODbL) - *Requires attribution on the map display.*

> **Note:** This UDC is designed for the **eXBuilder6** platform. Ensure you have a valid license for the eXBuilder6 framework before deploying to a production environment.
