/// start - udc.echart_Bar
/*
 * UDC Qualified Name: udc.echart_Bar
 * App URI: udc/echart_Bar
 * Source Location: udc/echart_Bar.clx
 *
 * This file was generated by eXBuilder6 compiler(1.0.5949), Don't edit manually.
 */
(function(){
	// App Declaration
		var internalApp = new cpr.core.App("udc/echart_Bar", { 
			onPrepare: function(loader) {
			},
			onCreate: function(/* cpr.core.AppInstance */ app, exports) {
				var linker = {};
				// Start - User Script
				/************************************************
				 * chart_Bar.js
				 * Created at 2020. 7. 8. ì˜¤í›„ 6:47:59.
				 *
				 * @author csj
				 ************************************************/
	
				/**
				 * UDC ì»¨íŠ¸ë¡¤ì´ ê·¸ë¦¬ë“œì˜ ë·° ëª¨ë“œì—ì„œ í‘œì‹œí•  í…ìŠ¤íŠ¸ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.
				 */
				exports.getText = function() {
					// TODO: ê·¸ë¦¬ë“œì˜ ë·° ëª¨ë“œì—ì„œ í‘œì‹œí•  í…ìŠ¤íŠ¸ë¥¼ ë°˜í™˜í•˜ëŠ” í•˜ëŠ” ì½”ë“œë¥¼ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤.
					return "";
				};
				exports.drawChart = drawChart;
				/*
				 * ì‰˜ì—ì„œ init ì´ë²¤íŠ¸ ë°œìƒ ì‹œ í˜¸ì¶œ.
				 */
				function onShl1Init( /* cpr.events.CUIEvent */ e) {
					/** 
					 * @type cpr.controls.UIControlShell
					 */
					var shl1 = e.control;
					
					if (e.content) {
						e.preventDefault();
					}
					
					window.addEventListener("resize", function(e) {
						if (!app.disposed) {
							app.lookup("shl1").getComponent("bar").resize();
						}
					});
					
				}
	
				/*
				 * ì‰˜ì—ì„œ load ì´ë²¤íŠ¸ ë°œìƒ ì‹œ í˜¸ì¶œ.
				 */
				function onShl1Load( /* cpr.events.CUIEvent */ e) {
					/** 
					 * @type cpr.controls.UIControlShell
					 */
					var shl1 = e.control;
					
					var voContent = e.content;
					
					if (!voContent) {
						return;
					}
					var resourceLoader = new cpr.core.ResourceLoader();
					resourceLoader.addScript("./thirdparty/echarts/echarts.min.js");
					// resourceLoader ë¡œë“œ í›„ ì°¨íŠ¸ë¥¼ ê·¸ë ¤ì¤ë‹ˆë‹¤.
					resourceLoader.load().then(function(input) {
						shl1.registerComponent("voContent", voContent);
						drawChart();
					});
				}
	
				/**
				 * bar ì°¨íŠ¸ë¥¼ ê·¸ë¦½ë‹ˆë‹¤.
				 */
				function drawChart() {
					var poContent = app.lookup("shl1").getComponent("voContent");
					if(!poContent){
						return;
					}
					var voChart = echarts.init(poContent);
					/** @type cpr.data.DataSet */
					var vcDataset = app.getAppProperty("dataSet");				// ë°ì´í„° ì…‹
					if (vcDataset) {
						var vsTitle = app.getAppProperty("title");				// íƒ€ì´í‹€
						var vbTooltip = app.getAppProperty("showTooltip");		// ë²”ë¡€ ì‚¬ìš© ì—¬ë¶€
						var vsItemColNm = app.getAppProperty("itemColNm");		// í•­ëª© ì»¬ëŸ¼ëª…
						var vsValueColNm = app.getAppProperty("valueColNm");	// yì¶•(ê°’) ì»¬ëŸ¼ëª…
						var voOption = {
							xAxis: {
								type: 'category',
								data: vcDataset.getColumnData(vsItemColNm)
							},
							yAxis: {
								type: 'value',
							},
							tooltip: {
								show: vbTooltip,
								trigger: 'axis',
								axisPointer: {
									type: 'shadow'
								}
							},
							series: [{
								data: vcDataset.getColumnData(vsValueColNm),
								type: 'bar'
							}]
							
						};
						// íƒ€ì´í‹€ ê°’ì´ ìˆëŠ” ê²½ìš°
						if (!ValueUtil.isNull(vsTitle)) {
							var vaTitlePosition = app.getAppProperty("titlePosition").split("-");
							
							voOption["title"] = {
								text: vsTitle,
								top: vaTitlePosition[0],
								left: vaTitlePosition[1]
							}
						}
						voChart.setOption(voOption);
					}
					app.lookup("shl1").registerComponent("bar", voChart);
				};
				// End - User Script
				
				// Header
				app.declareAppProperty("dataSet", null);
				app.declareBindableAppProperty("title", null);
				app.declareBindableAppProperty("titlePosition", "top-left");
				app.declareBindableAppProperty("showTooltip", true);
				app.declareBindableAppProperty("itemColNm", "ITEM");
				app.declareBindableAppProperty("valueColNm", "VALUE");
				app.supportMedia("all", "EXB-FULL");
				
				// Configure root container
				var container = app.getContainer();
				container.style.css({
					"width" : "100%",
					"top" : "0px",
					"height" : "100%",
					"left" : "0px"
				});
				
				// Layout
				var xYLayout_1 = new cpr.controls.layouts.XYLayout();
				xYLayout_1.scrollable = false;
				container.setLayout(xYLayout_1);
				
				// UI Configuration
				var uIControlShell_1 = new cpr.controls.UIControlShell("shl1");
				if(typeof onShl1Init == "function") {
					uIControlShell_1.addEventListener("init", onShl1Init);
				}
				if(typeof onShl1Load == "function") {
					uIControlShell_1.addEventListener("load", onShl1Load);
				}
				container.addChild(uIControlShell_1, {
					"top": "0px",
					"right": "0px",
					"bottom": "0px",
					"left": "0px"
				});
				if(typeof onBodyPropertyChange == "function"){
					app.addEventListener("property-change", onBodyPropertyChange);
				}
			}
		});
	internalApp.title = "ë°” ì°¨íŠ¸";
	
	// Type declaration for echart_Bar
	cpr.utils.Util.ensurePackage("udc").echart_Bar = function(id){
		cpr.controls.UDCBase.call(this, "udc.echart_Bar", internalApp, id);
	};
	
	udc.echart_Bar.prototype = Object.create(cpr.controls.UDCBase.prototype);
	Object.defineProperty(udc.echart_Bar.prototype, "type", {
		get : function(){
			return "udc.echart_Bar";
		},
		
		configurable: true
	});
	
	// App Properties
	Object.defineProperty(udc.echart_Bar.prototype, "dataSet", {
		get: function(){
			return this.getEmbeddedAppInstance().getAppProperty("dataSet");
		},
		set: function(newValue){
			return this.getEmbeddedAppInstance().setAppProperty("dataSet", newValue, true);
		}
	});
	Object.defineProperty(udc.echart_Bar.prototype, "title", {
		get: function(){
			return this.getEmbeddedAppInstance().getAppProperty("title");
		},
		set: function(newValue){
			return this.getEmbeddedAppInstance().setAppProperty("title", newValue, true);
		}
	});
	Object.defineProperty(udc.echart_Bar.prototype, "titlePosition", {
		get: function(){
			return this.getEmbeddedAppInstance().getAppProperty("titlePosition");
		},
		set: function(newValue){
			return this.getEmbeddedAppInstance().setAppProperty("titlePosition", newValue, true);
		}
	});
	Object.defineProperty(udc.echart_Bar.prototype, "showTooltip", {
		get: function(){
			return this.getEmbeddedAppInstance().getAppProperty("showTooltip");
		},
		set: function(newValue){
			return this.getEmbeddedAppInstance().setAppProperty("showTooltip", newValue, true);
		}
	});
	Object.defineProperty(udc.echart_Bar.prototype, "itemColNm", {
		get: function(){
			return this.getEmbeddedAppInstance().getAppProperty("itemColNm");
		},
		set: function(newValue){
			return this.getEmbeddedAppInstance().setAppProperty("itemColNm", newValue, true);
		}
	});
	Object.defineProperty(udc.echart_Bar.prototype, "valueColNm", {
		get: function(){
			return this.getEmbeddedAppInstance().getAppProperty("valueColNm");
		},
		set: function(newValue){
			return this.getEmbeddedAppInstance().setAppProperty("valueColNm", newValue, true);
		}
	});
	
	// Register type into the Platform and package
	cpr.core.Platform.INSTANCE.register(internalApp);
})();
/// end - udc.echart_Bar
/// start - udc.mapEx
/*
 * UDC Qualified Name: udc.mapEx
 * App URI: udc/mapEx
 * Source Location: udc/mapEx.clx
 *
 * This file was generated by eXBuilder6 compiler(1.0.5949), Don't edit manually.
 */
(function(){
	// App Declaration
		var internalApp = new cpr.core.App("udc/mapEx", { 
			onPrepare: function(loader) {
			},
			onCreate: function(/* cpr.core.AppInstance */ app, exports) {
				var linker = {};
				// Start - User Script
				/************************************************
				 ************************************************/
	
				/**
				 * UDC ì»¨íŠ¸ë¡¤ì´ ê·¸ë¦¬ë“œì˜ ë·° ëª¨ë“œì—ì„œ í‘œì‹œí•  í…ìŠ¤íŠ¸ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.
				 */
				exports.getText = function() {
					return "Map Chart";
				};
	
				exports.drawChart = drawChart;
	
				/*
				 * ì‰˜ì—ì„œ init ì´ë²¤íŠ¸ ë°œìƒ ì‹œ í˜¸ì¶œ.
				 */
				function onShl1Init(/* cpr.events.CUIEvent */ e) {
					/** @type cpr.controls.UIControlShell */
					var shl1 = e.control;
					
					if (e.content) {
						e.preventDefault();
					}
					
					// ì°½ í¬ê¸° ë³€ê²½ ì‹œ ì§€ë„ ë¦¬ì‚¬ì´ì¦ˆ
					window.addEventListener("resize", function(e) {
						if (!app.disposed) {
							var mapInstance = app.lookup("shl1").getComponent("leafletMap");
							if (mapInstance) {
								mapInstance.invalidateSize();
							}
						}
					});
				}
	
				/*
				 * ì‰˜ì—ì„œ load ì´ë²¤íŠ¸ ë°œìƒ ì‹œ í˜¸ì¶œ.
				 */
				function onShl1Load(/* cpr.events.CUIEvent */ e) {
					/** @type cpr.controls.UIControlShell */
					var shl1 = e.control;
					
					var voContent = e.content;
					
					if (!voContent) {
						return;
					}
					
					var resourceLoader = new cpr.core.ResourceLoader();
					// Leaflet CSS ì¶”ê°€
					resourceLoader.addCSS("https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.css");
					// Leaflet JS ì¶”ê°€
					resourceLoader.addScript("https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.js");
					
					// resourceLoader ë¡œë“œ í›„ ì§€ë„ë¥¼ ê·¸ë ¤ì¤ë‹ˆë‹¤.
					resourceLoader.load().then(function() {
						shl1.registerComponent("voContent", voContent);
						drawChart();
					});
				}
	
				/**
				 * ì§€ë„ë¥¼ ê·¸ë¦½ë‹ˆë‹¤.
				 */
				function drawChart() {
					var poContent = app.lookup("shl1").getComponent("voContent");
					if (!poContent) {
						return;
					}
					
					// ì»¨í…Œì´ë„ˆ ìŠ¤íƒ€ì¼ ì„¤ì •
					poContent.style.width = "100%";
					poContent.style.height = "100%";
					
					// ì•± í”„ë¡œí¼í‹°ì—ì„œ ì„¤ì •ê°’ ê°€ì ¸ì˜¤ê¸°
					var vsApiUrl = app.getAppProperty("apiUrl") || "http://localhost:8080";
					var vsAdminLevel = app.getAppProperty("adminLevel") || "sido";
					var vsTitle = app.getAppProperty("title");
					var vbShowTooltip = app.getAppProperty("showTooltip") !== false;
					var vbShowLegend = app.getAppProperty("showLegend") !== false;
					
					// Leaflet ì§€ë„ ì´ˆê¸°í™”
					var map = L.map(poContent).setView([36.5, 127.5], 7);
					
					// ë² ì´ìŠ¤ë§µ ì¶”ê°€
					L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
						attribution: 'Â© OpenStreetMap contributors',
						maxZoom: 18
					}).addTo(map);
					
					// íƒ€ì´í‹€ ì¶”ê°€
					if (!ValueUtil.isNull(vsTitle)) {
						var titleControl = L.control({position: 'topleft'});
						titleControl.onAdd = function() {
							var div = L.DomUtil.create('div', 'map-title');
							div.style.background = 'white';
							div.style.padding = '10px 15px';
							div.style.borderRadius = '5px';
							div.style.boxShadow = '0 2px 5px rgba(0,0,0,0.2)';
							div.style.fontSize = '16px';
							div.style.fontWeight = 'bold';
							div.innerHTML = vsTitle;
							return div;
						};
						titleControl.addTo(map);
					}
					
					// ë²”ë¡€ ì¶”ê°€
					if (vbShowLegend) {
						var legend = L.control({position: 'bottomright'});
						legend.onAdd = function() {
							var div = L.DomUtil.create('div', 'map-legend');
							div.style.background = 'white';
							div.style.padding = '10px';
							div.style.borderRadius = '5px';
							div.style.boxShadow = '0 2px 5px rgba(0,0,0,0.2)';
							div.innerHTML = '<h4 style="margin: 0 0 10px 0;">í–‰ì •êµ¬ì—­</h4>' +
								'<div style="display: flex; align-items: center; margin: 5px 0;">' +
								'<div style="width: 30px; height: 20px; background: #3498db; margin-right: 8px;"></div>' +
								'<span>ì„ íƒëœ ì§€ì—­</span></div>';
							return div;
						};
						legend.addTo(map);
					}
					
					// ì§€ë„ ì»´í¬ë„ŒíŠ¸ ë“±ë¡
					app.lookup("shl1").registerComponent("leafletMap", map);
					
					// API ë°ì´í„° ë¡œë“œ
					loadMapData(map, vsApiUrl, vsAdminLevel, vbShowTooltip);
				}
	
				/**
				 * APIì—ì„œ ì§€ë„ ë°ì´í„°ë¥¼ ë¡œë“œí•©ë‹ˆë‹¤.
				 */
				function loadMapData(map, apiUrl, adminLevel, showTooltip) {
					var endpoint = adminLevel === 'sido' ? '/api/map/sido.do' : '/api/map/sigungu.do';
					var url = apiUrl + endpoint;
					
					// ë¡œë”© í‘œì‹œ
					showLoading(true);
					
					app.lookup("sms1").send().then(function(input){
						debugger
					});
				//	fetch(url)
				//		.then(function(response) {
				//			if (!response.ok) {
				//				throw new Error('API í˜¸ì¶œ ì‹¤íŒ¨: ' + response.status);
				//			}
				//			return response.json();
				//		})
				//		.then(function(data) {
				//			// ì—ëŸ¬ ì²´í¬
				//			if (data.error) {
				//				throw new Error(data.error);
				//			}
				//			
				//			// GeoJSON ìœ íš¨ì„± ì²´í¬
				//			if (data.type !== 'FeatureCollection' || !data.features || data.features.length === 0) {
				//				throw new Error('ìœ íš¨í•œ GeoJSON ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.');
				//			}
				//			
				//			// ì§€ë„ì— ë°ì´í„° ë Œë”ë§
				//			renderGeoJson(map, data, showTooltip);
				//			
				//			// ë¡œë”© ìˆ¨ê¹€
				//			showLoading(false);
				//		})
				//		.catch(function(error) {
				//			console.error('ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', error);
				//			alert('ì§€ë„ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\n' + error.message);
				//			showLoading(false);
				//		});
				}
	
				/**
				 * GeoJSON ë°ì´í„°ë¥¼ ì§€ë„ì— ë Œë”ë§í•©ë‹ˆë‹¤.
				 */
				function renderGeoJson(map, geoJsonData, showTooltip) {
					var colors = [
						'#3498db', '#e74c3c', '#2ecc71', '#f39c12', '#9b59b6',
						'#1abc9c', '#34495e', '#e67e22', '#95a5a6', '#d35400',
						'#c0392b', '#27ae60', '#8e44ad', '#16a085', '#2c3e50'
					];
					
					var colorIndex = 0;
					var featureColors = {};
					
					// ìŠ¤íƒ€ì¼ í•¨ìˆ˜
					function style(feature) {
						var featureId = feature.id || feature.properties.ctprvn_cd || feature.properties.sig_cd;
						
						if (!featureColors[featureId]) {
							featureColors[featureId] = colors[colorIndex % colors.length];
							colorIndex++;
						}
						
						return {
							fillColor: featureColors[featureId],
							weight: 2,
							opacity: 1,
							color: '#ffffff',
							fillOpacity: 0.6
						};
					}
					
					// í•˜ì´ë¼ì´íŠ¸ í•¨ìˆ˜
					function highlightFeature(e) {
						var layer = e.target;
						layer.setStyle({
							weight: 3,
							color: '#2c3e50',
							fillOpacity: 0.8
						});
						layer.bringToFront();
					}
					
					// ë¦¬ì…‹ í•¨ìˆ˜
					var geoJsonLayer;
					function resetHighlight(e) {
						geoJsonLayer.resetStyle(e.target);
					}
					
					// ì¤Œ í•¨ìˆ˜
					function zoomToFeature(e) {
						map.fitBounds(e.target.getBounds());
					}
					
					// ê° Featureì— ì´ë²¤íŠ¸ ë°”ì¸ë”©
					function onEachFeature(feature, layer) {
						layer.on({
							mouseover: highlightFeature,
							mouseout: resetHighlight,
							click: zoomToFeature
						});
						
						// íˆ´íŒ ì¶”ê°€
						if (showTooltip) {
							var props = feature.properties;
							var name = props.ctp_kor_nm || props.sig_kor_nm || 
									   props.full_nm || props.ctp_eng_nm || 'ì•Œ ìˆ˜ ì—†ìŒ';
							
							layer.bindTooltip(name, {
								permanent: false,
								direction: 'center'
							});
						}
						
						// íŒì—… ì¶”ê°€
						var props = feature.properties;
						var name = props.ctp_kor_nm || props.sig_kor_nm || 'ì•Œ ìˆ˜ ì—†ìŒ';
						var code = props.ctprvn_cd || props.sig_cd || '-';
						var popupContent = '<div style="padding: 5px;">' +
							'<strong>' + name + '</strong><br>' +
							'ì½”ë“œ: ' + code +
							'</div>';
						layer.bindPopup(popupContent);
					}
					
					// GeoJSON ë ˆì´ì–´ ì¶”ê°€
					geoJsonLayer = L.geoJSON(geoJsonData, {
						style: style,
						onEachFeature: onEachFeature
					}).addTo(map);
					
					// ì§€ë„ ë²”ìœ„ ë§ì¶”ê¸°
					if (geoJsonLayer.getBounds().isValid()) {
						map.fitBounds(geoJsonLayer.getBounds());
					}
					
					// ë ˆì´ì–´ ë“±ë¡
					app.lookup("shl1").registerComponent("geoJsonLayer", geoJsonLayer);
				}
	
				/**
				 * ë¡œë”© í‘œì‹œ/ìˆ¨ê¹€
				 */
				function showLoading(show) {
					var shl1 = app.lookup("shl1");
					if (!shl1) return;
					
					var loadingDiv = shl1.getComponent("loadingDiv");
					
					if (show) {
						if (!loadingDiv) {
							var voContent = shl1.getComponent("voContent");
							loadingDiv = document.createElement("div");
							loadingDiv.style.position = "absolute";
							loadingDiv.style.top = "0";
							loadingDiv.style.left = "0";
							loadingDiv.style.right = "0";
							loadingDiv.style.bottom = "0";
							loadingDiv.style.background = "rgba(0,0,0,0.5)";
							loadingDiv.style.display = "flex";
							loadingDiv.style.justifyContent = "center";
							loadingDiv.style.alignItems = "center";
							loadingDiv.style.zIndex = "9999";
							loadingDiv.innerHTML = '<div style="background: white; padding: 20px; border-radius: 5px;">ë¡œë”© ì¤‘...</div>';
							voContent.appendChild(loadingDiv);
							shl1.registerComponent("loadingDiv", loadingDiv);
						}
						loadingDiv.style.display = "flex";
					} else {
						if (loadingDiv) {
							loadingDiv.style.display = "none";
						}
					}
				}
				// End - User Script
				
				// Header
				app.declareAppProperty("dataSet", null);
				app.declareBindableAppProperty("title", null);
				app.declareBindableAppProperty("titlePosition", "top-left");
				app.declareBindableAppProperty("showTooltip", true);
				app.declareBindableAppProperty("itemColNm", "ITEM");
				app.declareBindableAppProperty("valueColNm", "VALUE");
				var submission_1 = new cpr.protocols.Submission("sms1");
				submission_1.method = "get";
				submission_1.action = "../api/map/sido.do";
				app.register(submission_1);
				app.supportMedia("all", "EXB-FULL");
				
				// Configure root container
				var container = app.getContainer();
				container.style.css({
					"width" : "100%",
					"top" : "0px",
					"height" : "100%",
					"left" : "0px"
				});
				
				// Layout
				var xYLayout_1 = new cpr.controls.layouts.XYLayout();
				xYLayout_1.scrollable = false;
				container.setLayout(xYLayout_1);
				
				// UI Configuration
				var uIControlShell_1 = new cpr.controls.UIControlShell("shl1");
				if(typeof onShl1Init == "function") {
					uIControlShell_1.addEventListener("init", onShl1Init);
				}
				if(typeof onShl1Load == "function") {
					uIControlShell_1.addEventListener("load", onShl1Load);
				}
				container.addChild(uIControlShell_1, {
					"top": "0px",
					"right": "0px",
					"bottom": "0px",
					"left": "0px"
				});
				if(typeof onBodyPropertyChange == "function"){
					app.addEventListener("property-change", onBodyPropertyChange);
				}
			}
		});
	internalApp.title = "ë°” ì°¨íŠ¸";
	
	// Type declaration for mapEx
	cpr.utils.Util.ensurePackage("udc").mapEx = function(id){
		cpr.controls.UDCBase.call(this, "udc.mapEx", internalApp, id);
	};
	
	udc.mapEx.prototype = Object.create(cpr.controls.UDCBase.prototype);
	Object.defineProperty(udc.mapEx.prototype, "type", {
		get : function(){
			return "udc.mapEx";
		},
		
		configurable: true
	});
	
	// App Properties
	Object.defineProperty(udc.mapEx.prototype, "dataSet", {
		get: function(){
			return this.getEmbeddedAppInstance().getAppProperty("dataSet");
		},
		set: function(newValue){
			return this.getEmbeddedAppInstance().setAppProperty("dataSet", newValue, true);
		}
	});
	Object.defineProperty(udc.mapEx.prototype, "title", {
		get: function(){
			return this.getEmbeddedAppInstance().getAppProperty("title");
		},
		set: function(newValue){
			return this.getEmbeddedAppInstance().setAppProperty("title", newValue, true);
		}
	});
	Object.defineProperty(udc.mapEx.prototype, "titlePosition", {
		get: function(){
			return this.getEmbeddedAppInstance().getAppProperty("titlePosition");
		},
		set: function(newValue){
			return this.getEmbeddedAppInstance().setAppProperty("titlePosition", newValue, true);
		}
	});
	Object.defineProperty(udc.mapEx.prototype, "showTooltip", {
		get: function(){
			return this.getEmbeddedAppInstance().getAppProperty("showTooltip");
		},
		set: function(newValue){
			return this.getEmbeddedAppInstance().setAppProperty("showTooltip", newValue, true);
		}
	});
	Object.defineProperty(udc.mapEx.prototype, "itemColNm", {
		get: function(){
			return this.getEmbeddedAppInstance().getAppProperty("itemColNm");
		},
		set: function(newValue){
			return this.getEmbeddedAppInstance().setAppProperty("itemColNm", newValue, true);
		}
	});
	Object.defineProperty(udc.mapEx.prototype, "valueColNm", {
		get: function(){
			return this.getEmbeddedAppInstance().getAppProperty("valueColNm");
		},
		set: function(newValue){
			return this.getEmbeddedAppInstance().setAppProperty("valueColNm", newValue, true);
		}
	});
	
	// Register type into the Platform and package
	cpr.core.Platform.INSTANCE.register(internalApp);
})();
/// end - udc.mapEx
/// start - udc.udcMapEx
/*
 * UDC Qualified Name: udc.udcMapEx
 * App URI: udc/udcMapEx
 * Source Location: udc/udcMapEx.clx
 *
 * This file was generated by eXBuilder6 compiler(1.0.5949), Don't edit manually.
 */
(function(){
	// App Declaration
		var internalApp = new cpr.core.App("udc/udcMapEx", { 
			onPrepare: function(loader) {
			},
			onCreate: function(/* cpr.core.AppInstance */ app, exports) {
				var linker = {};
				// Start - User Script
				/************************************************
				 * Enhanced Map Chart with Full Features & Interactive UI
				 ************************************************/
	
				/**
				 * ì „ì—­ ë³€ìˆ˜: ê·¸ë¦¬ê¸° ëª¨ë“œ ìƒíƒœ ê´€ë¦¬
				 */
				var drawState = {
					mode: null, // 'marker', 'polyline', 'image', 'panel', 'sparkline'
					tempPolyline: null, // ê²½ë¡œ ê·¸ë¦¬ê¸°ìš© ì„ì‹œ ë¼ì¸
					points: [] // ê²½ë¡œ í¬ì¸íŠ¸ ë°°ì—´
				};
	
				/**
				 * UDC ì»¨íŠ¸ë¡¤ì´ ê·¸ë¦¬ë“œì˜ ë·° ëª¨ë“œì—ì„œ í‘œì‹œí•  í…ìŠ¤íŠ¸ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.
				 */
				exports.getText = function() {
					return "Map Chart (Interactive)";
				};
	
				exports.drawChart = drawChart;
	
				/*
				 * ì‰˜ì—ì„œ init ì´ë²¤íŠ¸ ë°œìƒ ì‹œ í˜¸ì¶œ.
				 */
				function onShl1Init( /* cpr.events.CUIEvent */ e) {
					/** @type cpr.controls.UIControlShell */
					var shl1 = e.control;
					
					if (e.content) {
						e.preventDefault();
					}
					
					// ì°½ í¬ê¸° ë³€ê²½ ì‹œ ì§€ë„ ë¦¬ì‚¬ì´ì¦ˆ
					window.addEventListener("resize", function(e) {
						if (!app.disposed) {
							var mapInstance = app.lookup("shl1").getComponent("leafletMap");
							if (mapInstance) {
								mapInstance.invalidateSize();
							}
						}
					});
				}
	
				function onShl1Load(e) {
					/** @type cpr.controls.UIControlShell */
					var shl1 = e.control;
					var voContent = e.content;
					
					if (!voContent) {
						return;
					}
					
					// 1ë‹¨ê³„: Leaflet ì½”ì–´ ë¡œë“œ
					var leafletLoader = new cpr.core.ResourceLoader();
					leafletLoader.addCSS("https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.css");
					leafletLoader.addScript("https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.js");
					
					leafletLoader.load()
						.then(function() {
							console.log('Leaflet ë¡œë“œ ì™„ë£Œ');
							
							// 2ë‹¨ê³„: MarkerCluster í”ŒëŸ¬ê·¸ì¸ ë¡œë“œ
							var pluginLoader = new cpr.core.ResourceLoader();
							pluginLoader.addCSS("https://cdnjs.cloudflare.com/ajax/libs/leaflet.markercluster/1.5.3/MarkerCluster.css");
							pluginLoader.addCSS("https://cdnjs.cloudflare.com/ajax/libs/leaflet.markercluster/1.5.3/MarkerCluster.Default.css");
							pluginLoader.addScript("https://cdnjs.cloudflare.com/ajax/libs/leaflet.markercluster/1.5.3/leaflet.markercluster.min.js");
							
							return pluginLoader.load();
						})
						.then(function() {
							console.log('MarkerCluster ë¡œë“œ ì™„ë£Œ');
							
							// 3ë‹¨ê³„: ì§€ë„ ì´ˆê¸°í™”
							shl1.registerComponent("voContent", voContent);
							drawChart();
						})
						.catch(function(error) {
							console.error('ë¦¬ì†ŒìŠ¤ ë¡œë“œ ì‹¤íŒ¨:', error);
							alert('ì§€ë„ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
						});
				}
	
				/**
				 * ì§€ë„ë¥¼ ê·¸ë¦½ë‹ˆë‹¤.
				 */
				function drawChart() {
					var poContent = app.lookup("shl1").getComponent("voContent");
					if (!poContent) {
						return;
					}
					
					// ì»¨í…Œì´ë„ˆ ìŠ¤íƒ€ì¼ ì„¤ì •
					poContent.style.width = "100%";
					poContent.style.height = "100%";
					
					// ì•± í”„ë¡œí¼í‹°ì—ì„œ ì„¤ì •ê°’ ê°€ì ¸ì˜¤ê¸°
					var vsApiUrl = app.getAppProperty("apiUrl") || "http://localhost:8080";
					var vsAdminLevel = app.getAppProperty("adminLevel") || "sido";
					var vsTitle = app.getAppProperty("title");
					var vbShowTooltip = app.getAppProperty("showTooltip") !== false;
					var vbShowLegend = app.getAppProperty("showLegend") !== false;
					var vaDataValues = app.getAppProperty("dataValues") || [];
					var vsColorScheme = app.getAppProperty("colorScheme") || "blue";
					var vaCustomColors = app.getAppProperty("customColors") || null;
					var vbEnableDrilldown = app.getAppProperty("enableDrilldown") !== false;
					var vbEnableDongDrilldown = app.getAppProperty("enableDongDrilldown") !== false;
					var voMarkers = app.getAppProperty("markers") || [];
					var voPolylines = app.getAppProperty("polylines") || [];
					var voCustomImages = app.getAppProperty("customImages") || [];
					var voPanels = app.getAppProperty("panels") || [];
					var voSparkCharts = app.getAppProperty("sparkCharts") || [];
					var voLabels = app.getAppProperty("labels") || [];
					var voCustomTooltips = app.getAppProperty("customTooltips") || {};
					var voHoverColors = app.getAppProperty("hoverColors") || {};
					
					// Leaflet ì§€ë„ ì´ˆê¸°í™”
					var map = L.map(poContent, {
						zoomControl: true,
						scrollWheelZoom: true,
						doubleClickZoom: true,
						dragging: true
					}).setView([36.5, 127.5], 7);
					
					// ë² ì´ìŠ¤ë§µ ì¶”ê°€
					L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
						attribution: 'Â© OpenStreetMap contributors',
						maxZoom: 18
					}).addTo(map);
					
					// íƒ€ì´í‹€ ì¶”ê°€
					if (!ValueUtil.isNull(vsTitle)) {
						var titleControl = L.control({
							position: 'topleft'
						});
						titleControl.onAdd = function() {
							var div = L.DomUtil.create('div', 'map-title');
							div.style.background = 'white';
							div.style.padding = '10px 15px';
							div.style.borderRadius = '5px';
							div.style.boxShadow = '0 2px 5px rgba(0,0,0,0.2)';
							div.style.fontSize = '16px';
							div.style.fontWeight = 'bold';
							div.innerHTML = vsTitle;
							return div;
						};
						titleControl.addTo(map);
					}
					
					// ë²”ë¡€ ì¶”ê°€
					if (vbShowLegend) {
						addLegendControl(map, vaDataValues, vsColorScheme, vaCustomColors);
					}
					
					// [NEW] ì‚¬ìš©ì ê·¸ë¦¬ê¸° íˆ´ë°” ì¶”ê°€
					addDrawingToolbar(map);
					
					// [NEW] ì§€ë„ ë°”íƒ• í´ë¦­ ì´ë²¤íŠ¸ (ê·¸ë¦¬ê¸° ëª¨ë“œ ì²˜ë¦¬)
					map.on('click', function(e) {
						handleMapClick(map, e);
					});
					
					// [NEW] ë”ë¸” í´ë¦­ ì´ë²¤íŠ¸ (ê²½ë¡œ ê·¸ë¦¬ê¸° ì¢…ë£Œ ë“±)
					map.on('dblclick', function(e){
						if(drawState.mode === 'polyline') {
							finishPolyline(map);
						}
					});
					
					// ì§€ë„ ì»´í¬ë„ŒíŠ¸ ë“±ë¡
					app.lookup("shl1").registerComponent("leafletMap", map);
					
					// ì„¤ì •ê°’ ì €ì¥
					app.lookup("shl1").registerComponent("mapConfig", {
						dataValues: vaDataValues,
						colorScheme: vsColorScheme,
						customColors: vaCustomColors,
						enableDrilldown: vbEnableDrilldown,
						enableDongDrilldown: vbEnableDongDrilldown,
						adminLevel: vsAdminLevel,
						apiUrl: vsApiUrl,
						labels: voLabels,
						customTooltips: voCustomTooltips,
						hoverColors: voHoverColors
					});
					
					// API ë°ì´í„° ë¡œë“œ
					loadMapData(map, vsApiUrl, vsAdminLevel, vbShowTooltip);
					
					// ë§ˆì»¤ ì¶”ê°€
					if (voMarkers && voMarkers.length > 0) {
						addMarkers(map, voMarkers);
					}
					
					// ê²½ë¡œ ì¶”ê°€
					if (voPolylines && voPolylines.length > 0) {
						addPolylines(map, voPolylines);
					}
					
					// ì»¤ìŠ¤í…€ ì´ë¯¸ì§€ ì¶”ê°€
					if (voCustomImages && voCustomImages.length > 0) {
						addCustomImages(map, voCustomImages);
					}
					
					// íŒ¨ë„ ì¶”ê°€
					if (voPanels && voPanels.length > 0) {
						addPanels(map, voPanels);
					}
					
					// ìŠ¤íŒŒí¬ ì°¨íŠ¸ ì¶”ê°€
					if (voSparkCharts && voSparkCharts.length > 0) {
						addSparkCharts(map, voSparkCharts);
					}
				}
	
				/**
				 * APIì—ì„œ ì§€ë„ ë°ì´í„°ë¥¼ ë¡œë“œí•©ë‹ˆë‹¤.
				 */
				function loadMapData(map, apiUrl, adminLevel, showTooltip, skipSend) {
					var endpoint = adminLevel === 'sido' ? '/api/map/sido.do' : '/api/map/sigungu.do';
					var url = apiUrl + endpoint;
					
					showLoading(true);
					
					var sms1 = app.lookup("sms1");
					
					if (skipSend) {
						showLoading(false);
						return;
					}
					
					sms1.removeAllEventListeners("submit-success");
					sms1.removeAllEventListeners("submit-error");
					
					var successHandler = function(e) {
						var sub = e.control;
						
						if (!sub.xhr.responseText) {
							showLoading(false);
							return;
						}
						
						try {
							var data = JSON.parse(sub.xhr.responseText);
							
							if (data.error) {
								throw new Error(data.error);
							}
							
							if (data.type !== 'FeatureCollection' || !data.features || data.features.length === 0) {
								throw new Error('ìœ íš¨í•œ GeoJSON ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.');
							}
							
							renderGeoJson(map, data, showTooltip);
							showLoading(false);
							
						} catch (error) {
							console.error('ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', error);
							alert('ì§€ë„ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\n' + error.message);
							showLoading(false);
						}
					};
					
					var errorHandler = function(e) {
						console.error('API í˜¸ì¶œ ì‹¤íŒ¨');
						alert('API í˜¸ì¶œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
						showLoading(false);
					};
					
					sms1.addEventListener("submit-success", successHandler);
					sms1.addEventListener("submit-error", errorHandler);
					
					sms1.send();
				}
	
				/**
				 * GeoJSON ë°ì´í„°ë¥¼ ì§€ë„ì— ë Œë”ë§í•©ë‹ˆë‹¤.
				 */
				function renderGeoJson(map, geoJsonData, showTooltip) {
					var shl1 = app.lookup("shl1");
					var mapConfig = shl1.getComponent("mapConfig");
					var dataValues = mapConfig.dataValues || [];
					var colorScheme = mapConfig.colorScheme || "blue";
					var customColors = mapConfig.customColors;
					var enableDrilldown = mapConfig.enableDrilldown;
					var adminLevel = mapConfig.adminLevel;
					var labels = mapConfig.labels || [];
					var customTooltips = mapConfig.customTooltips || {};
					var hoverColors = mapConfig.hoverColors || {};
	
					// ë°ì´í„° ë§µ ìƒì„±
					var dataMap = {};
					var minValue = Infinity;
					var maxValue = -Infinity;
	
					dataValues.forEach(function(item) {
						dataMap[item.code] = item;
						if (item.value < minValue) minValue = item.value;
						if (item.value > maxValue) maxValue = item.value;
					});
	
					// ë¼ë²¨ ë§µ ìƒì„±
					var labelMap = {};
					labels.forEach(function(item) {
						labelMap[item.code] = item;
					});
	
					// ìƒ‰ìƒ ìŠ¤í‚¤ë§ˆ
					var colorSchemes = {
						blue: ['#deebf7', '#9ecae1', '#4292c6', '#08519c', '#08306b'],
						red: ['#fee5d9', '#fcae91', '#fb6a4a', '#de2d26', '#a50f15'],
						green: ['#edf8e9', '#bae4b3', '#74c476', '#31a354', '#006d2c'],
						purple: ['#f2f0f7', '#cbc9e2', '#9e9ac8', '#756bb1', '#54278f']
					};
	
					var colors = customColors || colorSchemes[colorScheme] || colorSchemes.blue;
	
					// ê°’ì— ë”°ë¥¸ ìƒ‰ìƒ ê³„ì‚°
					function getColorForValue(value) {
						if (minValue === maxValue) {
							return colors[2];
						}
						var ratio = (value - minValue) / (maxValue - minValue);
						var index = Math.floor(ratio * (colors.length - 1));
						return colors[Math.min(index, colors.length - 1)];
					}
	
					// ìŠ¤íƒ€ì¼ í•¨ìˆ˜
					function style(feature) {
						var props = feature.properties;
						var code = props.ctprvn_cd || props.sig_cd || props.emd_cd;
						var dataItem = dataMap[code];
	
						var fillColor = '#3498db';
						if (dataItem && dataItem.value !== undefined) {
							fillColor = getColorForValue(dataItem.value);
						} else if (dataItem && dataItem.color) {
							fillColor = dataItem.color;
						}
	
						return {
							fillColor: fillColor,
							weight: 2,
							opacity: 1,
							color: '#ffffff',
							fillOpacity: 0.7
						};
					}
	
					var geoJsonLayer;
	
					// ê° Featureì— ì´ë²¤íŠ¸ ë°”ì¸ë”©
					function onEachFeature(feature, layer) {
						// ì›ë³¸ ìŠ¤íƒ€ì¼ ì €ì¥
						feature.originalStyle = style(feature);
	
						// ì§€ì—­ ìƒíƒœ ì´ˆê¸°í™”
						feature._state = {
							regionColor: null,
							tooltipBg: "#333333",
							tooltipColor: "#ffffff",
							tooltipText: null
						};
	
						var props = feature.properties;
						var code = props.ctprvn_cd || props.sig_cd || props.emd_cd;
						var name = props.ctp_kor_nm || props.sig_kor_nm || props.emd_kor_nm ||
							props.adm_nm || props.full_nm || props.ctp_eng_nm || 'ì•Œ ìˆ˜ ì—†ìŒ';
						var dataItem = dataMap[code];
	
						// ë§ˆìš°ìŠ¤ ì˜¤ë²„ ì´ë²¤íŠ¸
						layer.on('mouseover', function(e) {
							// [CHECK] ê·¸ë¦¬ê¸° ëª¨ë“œì¼ ë•ŒëŠ” í˜¸ë²„ íš¨ê³¼ ë¬´ì‹œ
							if (drawState.mode) return;
	
							var layer = e.target;
							var props = layer.feature.properties;
							var code = props.ctprvn_cd || props.sig_cd || props.emd_cd;
	
							var hoverColor = hoverColors[code] || '#2c3e50';
							var hoverFillColor = hoverColors[code] ? hoverColors[code] : null;
	
							var hoverStyle = {
								weight: 4,
								color: hoverColor,
								fillOpacity: 0.9
							};
	
							if (hoverFillColor) {
								hoverStyle.fillColor = hoverFillColor;
							}
	
							layer.setStyle(hoverStyle);
							layer.bringToFront();
						});
	
						// ë§ˆìš°ìŠ¤ ì•„ì›ƒ ì´ë²¤íŠ¸
						layer.on('mouseout', function(e) {
							// [CHECK] ê·¸ë¦¬ê¸° ëª¨ë“œì¼ ë•ŒëŠ” ë¬´ì‹œ
							if (drawState.mode) return;
	
							var layer = e.target;
							var state = layer.feature._state;
							var props = layer.feature.properties;
							var code = props.ctprvn_cd || props.sig_cd || props.emd_cd;
	
							var baseStyle = layer.feature.originalStyle || {};
	
							// ì‚¬ìš©ì ì§€ì • ìƒ‰ìƒ í™•ì¸
							var customColor = state.regionColor;
	
							if (!customColor) {
								for (var i = 0; i < dataValues.length; i++) {
									if (dataValues[i].code === code && dataValues[i].color) {
										customColor = dataValues[i].color;
										break;
									}
								}
							}
	
							layer.setStyle({
								weight: baseStyle.weight || 2,
								color: baseStyle.color || "#ffffff",
								opacity: baseStyle.opacity || 1,
								fillOpacity: baseStyle.fillOpacity || 0.7,
								fillColor: customColor || baseStyle.fillColor
							});
						});
	
						// í´ë¦­ ì´ë²¤íŠ¸
						layer.on('click', function(e) {
							// [NEW] ê·¸ë¦¬ê¸° ëª¨ë“œ í™œì„±í™” ì‹œ: íŒì—… ì°¨ë‹¨ ë° ê·¸ë¦¬ê¸° í•¨ìˆ˜ í˜¸ì¶œ
							if (drawState.mode) {
								L.DomEvent.stopPropagation(e); // ì´ë²¤íŠ¸ ì „íŒŒ ì¤‘ë‹¨
								handleMapClick(map, e); // ê·¸ë¦¬ê¸° í•¨ìˆ˜ ê°•ì œ í˜¸ì¶œ
								
								// í˜¹ì‹œ íŒì—…ì´ ì—´ë¦¬ë ¤ í•˜ë©´ ë‹«ì•„ë²„ë¦¼
								setTimeout(function() {
									layer.closePopup();
								}, 0);
								return;
							}
	
							// ë™ ë ˆë²¨ì´ê±°ë‚˜ ë“œë¦´ë‹¤ìš´ ë¹„í™œì„±í™” ì‹œ -> íŒì—… í‘œì‹œ (ì•„ë˜ì—ì„œ bindPopupìœ¼ë¡œ ì²˜ë¦¬)
							if (adminLevel === 'dong' || !enableDrilldown) {
								return;
							}
	
							// ì‹œë„ -> ì‹œêµ°êµ¬ ë“œë¦´ë‹¤ìš´
							if (adminLevel === 'sido' && props.ctprvn_cd) {
								drilldownToSigungu(map, props.ctprvn_cd, layer.getBounds());
								return;
							}
	
							// ì‹œêµ°êµ¬ -> ìë©´ë™ ë“œë¦´ë‹¤ìš´
							if (adminLevel === 'sigungu' && props.sig_cd && mapConfig.enableDongDrilldown) {
								drilldownToDong(map, props.sig_cd, layer.getBounds());
								return;
							}
	
							// ê·¸ ì™¸ì˜ ê²½ìš° ì¤Œ
							map.fitBounds(layer.getBounds(), {
								padding: [50, 50],
								maxZoom: 15
							});
	
							// ì»¤ìŠ¤í…€ í´ë¦­ ì´ë²¤íŠ¸
							if (typeof onMapRegionClick === 'function') {
								onMapRegionClick({
									code: code,
									name: name,
									properties: props,
									bounds: layer.getBounds()
								});
							}
						});
	
						// íˆ´íŒ ì„¤ì •
						if (showTooltip) {
							layer.bindTooltip(function() {
								return buildTooltipHTML(layer, name, dataItem);
							}, {
								permanent: false,
								direction: 'center',
								className: 'custom-tooltip'
							});
						}
	
						// ë¼ë²¨ ì¶”ê°€
						var labelItem = labelMap[code];
						if (labelItem && labelItem.label) {
							var bounds = layer.getBounds();
							var center = bounds.getCenter();
	
							var labelIcon = L.divIcon({
								className: 'region-label',
								html: '<div style="' +
									'font-size: ' + (labelItem.fontSize || '12px') + ';' +
									'color: ' + (labelItem.color || '#333') + ';' +
									'font-weight: bold;' +
									'text-align: center;' +
									'white-space: nowrap;' +
									'text-shadow: 1px 1px 2px white, -1px -1px 2px white;' +
									'pointer-events: none;' +
									'">' + labelItem.label + '</div>',
								iconSize: null
							});
	
							var labelMarker = L.marker(center, {
								icon: labelIcon,
								interactive: false,
								zIndexOffset: 1000
							});
							labelMarker.addTo(map);
	
							if (!shl1.getComponent("labelMarkers")) {
								shl1.registerComponent("labelMarkers", []);
							}
							shl1.getComponent("labelMarkers").push(labelMarker);
						}
	
						// íŒì—… ì„¤ì • (ë™ ë ˆë²¨ì´ê±°ë‚˜ ë“œë¦´ë‹¤ìš´ ë¹„í™œì„±í™” ì‹œì—ë§Œ)
						if (adminLevel === 'dong' || !enableDrilldown) {
							var popupHTML = buildPopupHTML(name, code, dataItem, feature._state);
							layer.bindPopup(popupHTML, {
								maxWidth: 300,
								className: 'custom-popup'
							});
	
							// [NEW] íŒì—… ì—´ë¦´ ë•Œ ê·¸ë¦¬ê¸° ëª¨ë“œ ì²´í¬
							layer.on('popupopen', function(e) {
								if (drawState.mode) {
									// ê·¸ë¦¬ê¸° ëª¨ë“œë©´ íŒì—… ì¦‰ì‹œ ì œê±° (í¸ì§‘ì°½ ì•ˆ ëœ¨ê²Œ)
									e.popup.remove();
								} else {
									// ê·¸ë¦¬ê¸° ëª¨ë“œê°€ ì•„ë‹ˆë©´ ì •ìƒì ìœ¼ë¡œ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ë¶€ì°©
									attachPopupEventHandlers(e.popup, layer, name, dataItem);
								}
							});
						}
					}
	
					// GeoJSON ë ˆì´ì–´ ì¶”ê°€
					geoJsonLayer = L.geoJSON(geoJsonData, {
						style: style,
						onEachFeature: onEachFeature
					}).addTo(map);
	
					// ì§€ë„ ë²”ìœ„ ë§ì¶”ê¸°
					if (!mapConfig.targetBounds && geoJsonLayer.getBounds().isValid()) {
						map.fitBounds(geoJsonLayer.getBounds());
					}
	
					app.lookup("shl1").registerComponent("geoJsonLayer", geoJsonLayer);
				}
	
				/**
				 * íŒì—… HTML ìƒì„±
				 */
				function buildPopupHTML(name, code, dataItem, state) {
					var html = '<div style="padding: 10px; min-width: 250px;">';
					
					// í—¤ë”
					html += '<h4 style="margin: 0 0 15px 0; border-bottom: 2px solid #3498db; padding-bottom: 8px; color: #2c3e50;">';
					html += name + '</h4>';
					
					// ê¸°ë³¸ ì •ë³´
					html += '<div style="margin-bottom: 15px;">';
					html += '<div style="margin: 5px 0;"><strong>ì½”ë“œ:</strong> ' + code + '</div>';
					if (dataItem) {
						html += '<div style="margin: 5px 0;"><strong>' + dataItem.label + ':</strong> ' + dataItem.value + '</div>';
					}
					html += '</div>';
					
					// êµ¬ë¶„ì„ 
					html += '<hr style="border: none; border-top: 1px solid #ddd; margin: 15px 0;">';
					
					// ìŠ¤íƒ€ì¼ í¸ì§‘ ì„¹ì…˜
					html += '<div style="margin-bottom: 10px;"><strong>ğŸ¨ ìŠ¤íƒ€ì¼ í¸ì§‘</strong></div>';
					
					// ì§€ì—­ ìƒ‰ìƒ
					html += '<div style="margin: 10px 0;">';
					html += '<label style="display: block; margin-bottom: 5px; font-size: 12px; color: #555;">ì§€ì—­ ìƒ‰ìƒ</label>';
					html += '<input type="color" class="region-color" style="width: 100%; height: 35px; border: 1px solid #ddd; border-radius: 4px; cursor: pointer;">';
					html += '</div>';
					
					// íˆ´íŒ ë°°ê²½ìƒ‰
					html += '<div style="margin: 10px 0;">';
					html += '<label style="display: block; margin-bottom: 5px; font-size: 12px; color: #555;">íˆ´íŒ ë°°ê²½ìƒ‰</label>';
					html += '<input type="color" class="tooltip-bg" value="' + state.tooltipBg + '" style="width: 100%; height: 35px; border: 1px solid #ddd; border-radius: 4px; cursor: pointer;">';
					html += '</div>';
					
					// íˆ´íŒ ê¸€ììƒ‰
					html += '<div style="margin: 10px 0;">';
					html += '<label style="display: block; margin-bottom: 5px; font-size: 12px; color: #555;">íˆ´íŒ ê¸€ììƒ‰</label>';
					html += '<input type="color" class="tooltip-color" value="' + state.tooltipColor + '" style="width: 100%; height: 35px; border: 1px solid #ddd; border-radius: 4px; cursor: pointer;">';
					html += '</div>';
					
					// íˆ´íŒ í…ìŠ¤íŠ¸
					html += '<div style="margin: 10px 0;">';
					html += '<label style="display: block; margin-bottom: 5px; font-size: 12px; color: #555;">íˆ´íŒ í…ìŠ¤íŠ¸ (ë¹„ì›Œë‘ë©´ ê¸°ë³¸ê°’)</label>';
					html += '<textarea class="tooltip-text" placeholder="' + name + '" style="width: 100%; height: 60px; padding: 8px; border: 1px solid #ddd; border-radius: 4px; font-size: 12px; resize: vertical;"></textarea>';
					html += '</div>';
					
					// ì ìš© ë²„íŠ¼
					html += '<button class="apply-style" style="width: 100%; padding: 10px; background: #3498db; color: white; border: none; border-radius: 4px; cursor: pointer; font-weight: bold; margin-top: 10px;">';
					html += 'âœ“ ì ìš©</button>';
					
					// ì´ˆê¸°í™” ë²„íŠ¼
					html += '<button class="reset-style" style="width: 100%; padding: 8px; background: #95a5a6; color: white; border: none; border-radius: 4px; cursor: pointer; margin-top: 5px;">';
					html += 'ì´ˆê¸°í™”</button>';
					
					html += '</div>';
					
					return html;
				}
	
				/**
				 * íŒì—… ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ë“±ë¡
				 */
				function attachPopupEventHandlers(popup, layer, name, dataItem) {
					var popupEl = popup.getElement();
					if (!popupEl) return;
					
					var state = layer.feature._state;
					
					// í˜„ì¬ ìƒíƒœê°’ìœ¼ë¡œ ì…ë ¥ í•„ë“œ ì´ˆê¸°í™”
					var regionColorInput = popupEl.querySelector('.region-color');
					var tooltipBgInput = popupEl.querySelector('.tooltip-bg');
					var tooltipColorInput = popupEl.querySelector('.tooltip-color');
					var tooltipTextArea = popupEl.querySelector('.tooltip-text');
					
					if (state.regionColor) {
						regionColorInput.value = state.regionColor;
					}
					tooltipBgInput.value = state.tooltipBg;
					tooltipColorInput.value = state.tooltipColor;
					if (state.tooltipText) {
						tooltipTextArea.value = state.tooltipText;
					}
					
					// ì ìš© ë²„íŠ¼
					popupEl.querySelector('.apply-style').onclick = function() {
						var newRegionColor = regionColorInput.value;
						state.regionColor = newRegionColor || null;
						state.tooltipBg = tooltipBgInput.value;
						state.tooltipColor = tooltipColorInput.value;
						state.tooltipText = tooltipTextArea.value.trim() || null;
						
						// ì§€ì—­ ìŠ¤íƒ€ì¼ ë°˜ì˜
						applyFeatureStyle(layer);
						
						// íˆ´íŒ ê°±ì‹ 
						layer.unbindTooltip();
						layer.bindTooltip(function() {
							return buildTooltipHTML(layer, name, dataItem);
						}, {
							permanent: false,
							direction: 'center',
							className: 'custom-tooltip'
						});
						
						popup.remove();
						alert('ìŠ¤íƒ€ì¼ì´ ì ìš©ë˜ì—ˆìŠµë‹ˆë‹¤!');
					};
					
					// ì´ˆê¸°í™” ë²„íŠ¼
					popupEl.querySelector('.reset-style').onclick = function() {
						state.regionColor = null;
						state.tooltipBg = '#333333';
						state.tooltipColor = '#ffffff';
						state.tooltipText = null;
						
						regionColorInput.value = '#000000';
						tooltipBgInput.value = '#333333';
						tooltipColorInput.value = '#ffffff';
						tooltipTextArea.value = '';
						
						applyFeatureStyle(layer);
						
						layer.unbindTooltip();
						layer.bindTooltip(function() {
							return buildTooltipHTML(layer, name, dataItem);
						}, {
							permanent: false,
							direction: 'center',
							className: 'custom-tooltip'
						});
						
						alert('ìŠ¤íƒ€ì¼ì´ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤!');
					};
				}
	
				/**
				 * íˆ´íŒ HTML ìƒì„±
				 */
				function buildTooltipHTML(layer, name, dataItem) {
					var state = layer.feature._state;
					
					if (state.tooltipText) {
						return '<div style="' +
							'background: ' + state.tooltipBg + ';' +
							'color: ' + state.tooltipColor + ';' +
							'padding: 8px 12px;' +
							'border-radius: 4px;' +
							'box-shadow: 0 2px 5px rgba(0,0,0,0.3);' +
							'">' + state.tooltipText + '</div>';
					}
					
					var html = '<div style="' +
						'background: ' + state.tooltipBg + ';' +
						'color: ' + state.tooltipColor + ';' +
						'padding: 8px 12px;' +
						'border-radius: 4px;' +
						'box-shadow: 0 2px 5px rgba(0,0,0,0.3);' +
						'">';
					
					html += '<strong>' + name + '</strong>';
					
					if (dataItem) {
						html += '<br>' + dataItem.label + ': ' + dataItem.value;
					}
					
					html += '</div>';
					
					return html;
				}
	
				/**
				 * Feature ìŠ¤íƒ€ì¼ ì ìš©
				 */
				function applyFeatureStyle(layer) {
					var state = layer.feature._state;
					var base = layer.feature.originalStyle || {};
					
					layer.setStyle({
						weight: base.weight || 2,
						color: base.color || "#ffffff",
						opacity: base.opacity || 1,
						fillOpacity: base.fillOpacity || 0.7,
						fillColor: state.regionColor || base.fillColor
					});
				}
	
				/**
				 * ë²”ë¡€ ì»¨íŠ¸ë¡¤ ì¶”ê°€
				 */
				function addLegendControl(map, dataValues, colorScheme, customColors) {
					var legend = L.control({
						position: 'bottomright'
					});
					
					legend.onAdd = function() {
						var div = L.DomUtil.create('div', 'map-legend');
						div.style.background = 'white';
						div.style.padding = '10px';
						div.style.borderRadius = '5px';
						div.style.boxShadow = '0 2px 5px rgba(0,0,0,0.2)';
						div.style.fontSize = '12px';
						
						var html = '<h4 style="margin: 0 0 10px 0; font-size: 14px;">ë²”ë¡€</h4>';
						
						if (dataValues && dataValues.length > 0) {
							var values = dataValues.map(function(item) {
								return item.value;
							});
							var minValue = Math.min.apply(null, values);
							var maxValue = Math.max.apply(null, values);
							
							var colorSchemes = {
								blue: ['#deebf7', '#9ecae1', '#4292c6', '#08519c', '#08306b'],
								red: ['#fee5d9', '#fcae91', '#fb6a4a', '#de2d26', '#a50f15'],
								green: ['#edf8e9', '#bae4b3', '#74c476', '#31a354', '#006d2c'],
								purple: ['#f2f0f7', '#cbc9e2', '#9e9ac8', '#756bb1', '#54278f']
							};
							var colors = customColors || colorSchemes[colorScheme] || colorSchemes.blue;
							var step = (maxValue - minValue) / (colors.length - 1);
							
							for (var i = 0; i < colors.length; i++) {
								var from = minValue + (step * i);
								var to = minValue + (step * (i + 1));
								
								html += '<div style="display: flex; align-items: center; margin: 5px 0;">' +
									'<div style="width: 30px; height: 20px; background: ' + colors[i] + '; margin-right: 8px; border: 1px solid #ddd;"></div>' +
									'<span>' + Math.round(from) + ' - ' + Math.round(to) + '</span></div>';
							}
						} else {
							html += '<div style="display: flex; align-items: center; margin: 5px 0;">' +
								'<div style="width: 30px; height: 20px; background: #3498db; margin-right: 8px;"></div>' +
								'<span>í–‰ì •êµ¬ì—­</span></div>';
						}
						
						div.innerHTML = html;
						return div;
					};
					
					legend.addTo(map);
				}
	
				/**
				 * ë§ˆì»¤ ì¶”ê°€
				 */
				function addMarkers(map, markers) {
					var markerCluster = app.lookup("shl1").getComponent("markerCluster");
					if (!markerCluster) {
						markerCluster = L.markerClusterGroup();
						app.lookup("shl1").registerComponent("markerCluster", markerCluster);
						map.addLayer(markerCluster);
					}
	
					markers.forEach(function(markerData) {
						var marker = L.marker([markerData.lat, markerData.lng]);
						if (markerData.icon) {
							var customIcon = L.icon({
								iconUrl: markerData.icon,
								iconSize: [32, 32],
								iconAnchor: [16, 32],
								popupAnchor: [0, -32]
							});
							marker.setIcon(customIcon);
						}
						
						if (markerData.popup) {
							marker.bindPopup(markerData.popup);
						}
						
						if (markerData.label) {
							marker.bindTooltip(markerData.label, {
								permanent: false,
								direction: 'top'
							});
						}
						
						markerCluster.addLayer(marker);
					});
				}
	
				/**
				 * ê²½ë¡œ ì¶”ê°€
				 */
				function addPolylines(map, polylines) {
					var polylineGroup = app.lookup("shl1").getComponent("polylineGroup");
					if (!polylineGroup) {
						polylineGroup = L.layerGroup();
						app.lookup("shl1").registerComponent("polylineGroup", polylineGroup);
						map.addLayer(polylineGroup);
					}
	
					polylines.forEach(function(lineData) {
						var polyline = L.polyline(lineData.points, {
							color: lineData.color || '#3498db',
							weight: lineData.weight || 3,
							opacity: lineData.opacity || 0.7
						});
						if (lineData.popup) {
							polyline.bindPopup(lineData.popup);
						}
						
						polylineGroup.addLayer(polyline);
					});
				}
	
				/**
				 * ì»¤ìŠ¤í…€ ì´ë¯¸ì§€ ì¶”ê°€
				 */
				function addCustomImages(map, images) {
					var imageGroup = app.lookup("shl1").getComponent("imageGroup");
					if (!imageGroup) {
						imageGroup = L.layerGroup();
						app.lookup("shl1").registerComponent("imageGroup", imageGroup);
						map.addLayer(imageGroup);
					}
	
					images.forEach(function(imgData) {
						var icon = L.icon({
							iconUrl: imgData.url,
							iconSize: imgData.size || [50, 50],
							iconAnchor: [(imgData.size ? imgData.size[0] : 50) / 2, (imgData.size ? imgData.size[1] : 50) / 2]
						});
						var marker = L.marker([imgData.lat, imgData.lng], {
							icon: icon
						});
						
						if (imgData.popup) {
							marker.bindPopup(imgData.popup);
						}
						
						imageGroup.addLayer(marker);
					});
				}
	
				/**
				 * íŒ¨ë„ ì¶”ê°€
				 */
				function addPanels(map, panels) {
					var panelGroup = app.lookup("shl1").getComponent("panelGroup");
					if (!panelGroup) {
						panelGroup = L.layerGroup();
						app.lookup("shl1").registerComponent("panelGroup", panelGroup);
						map.addLayer(panelGroup);
					}
	
					panels.forEach(function(panelData) {
						var panelHtml = '<div style="' +
							'background: white;' +
							'padding: 10px;' +
							'border-radius: 5px;' +
							'box-shadow: 0 2px 10px rgba(0,0,0,0.3);' +
							'min-width: ' + (panelData.width || '200px') + ';' +
							'max-width: ' + (panelData.maxWidth || '300px') + ';' +
							'max-height: ' + (panelData.height || 'auto') + ';' +
							'overflow-y: auto;' +
							'">';
						if (panelData.title) {
							panelHtml += '<h4 style="margin: 0 0 10px 0; border-bottom: 2px solid #3498db; padding-bottom: 5px;">' +
								panelData.title + '</h4>';
						}
						
						panelHtml += '<div>' + panelData.content + '</div>';
						panelHtml += '</div>';
						
						var panelIcon = L.divIcon({
							className: 'custom-panel',
							html: panelHtml,
							iconSize: null
						});
						
						var panelMarker = L.marker([panelData.lat, panelData.lng], {
							icon: panelIcon,
							interactive: panelData.interactive !== false
						});
						
						if (panelData.popup) {
							panelMarker.bindPopup(panelData.popup);
						}
						
						panelGroup.addLayer(panelMarker);
					});
				}
	
				/**
				 * ìŠ¤íŒŒí¬ ì°¨íŠ¸ ì¶”ê°€
				 */
				function addSparkCharts(map, sparkCharts) {
					var chartGroup = app.lookup("shl1").getComponent("chartGroup");
					if (!chartGroup) {
						chartGroup = L.layerGroup();
						app.lookup("shl1").registerComponent("chartGroup", chartGroup);
						map.addLayer(chartGroup);
					}
	
					sparkCharts.forEach(function(chartData) {
						if (!chartData.data || chartData.data.length === 0) return;
						var width = chartData.width || 80;
						var height = chartData.height || 30;
						var color = chartData.color || '#3498db';
						var data = chartData.data;
						
						var min = Math.min.apply(null, data);
						var max = Math.max.apply(null, data);
						var range = max - min || 1;
						
						var points = [];
						var step = width / (data.length - 1);
						
						for (var i = 0; i < data.length; i++) {
							var x = i * step;
							var y = height - ((data[i] - min) / range * height);
							points.push(x + ',' + y);
						}
						
						var polyline = points.join(' ');
						
						var svg = '<svg width="' + width + '" height="' + height + '" style="background: white; border-radius: 3px; padding: 2px;">' +
							'<polyline points="' + polyline + '" ' +
							'style="fill: none; stroke: ' + color + '; stroke-width: 2;" />' +
							'</svg>';
						
						var chartIcon = L.divIcon({
							className: 'spark-chart',
							html: svg,
							iconSize: [width, height],
							iconAnchor: [width / 2, height / 2]
						});
						
						var chartMarker = L.marker([chartData.lat, chartData.lng], {
							icon: chartIcon,
							interactive: true
						});
						
						if (chartData.label) {
							var tooltipHtml = '<div style="padding: 5px;"><strong>' + chartData.label + '</strong><br>';
							tooltipHtml += 'ìµœì†Œ: ' + min + ', ìµœëŒ€: ' + max + '<br>';
							tooltipHtml += 'í˜„ì¬: ' + data[data.length - 1] + '</div>';
							
							chartMarker.bindTooltip(tooltipHtml);
						}
						
						if (chartData.popup) {
							chartMarker.bindPopup(chartData.popup);
						}
						
						chartGroup.addLayer(chartMarker);
					});
				}
	
				/**
				 * ì‹œêµ°êµ¬ë¡œ ë“œë¦´ë‹¤ìš´
				 */
				function drilldownToSigungu(map, sidoCode, targetBounds) {
					var geoJsonLayer = app.lookup("shl1").getComponent("geoJsonLayer");
					if (geoJsonLayer) {
						map.removeLayer(geoJsonLayer);
					}
					showLoading(true);
					var url = '../api/map/sigungu.do?sido=' + sidoCode;
					var sms1 = app.lookup("sms1");
					try {
						if (sms1.xhr && sms1.xhr.readyState !== 4) {
							sms1.xhr.abort();
						}
					} catch (e) {
						console.log('Previous request abort failed:', e);
					}
					sms1.removeAllEventListeners("submit-success");
					sms1.removeAllEventListeners("submit-error");
					sms1.action = url;
					var successHandler = function(e) {
						var sub = e.control;
						if (!sub.xhr.responseText) {
							showLoading(false);
							return;
						}
						
						try {
							var data = JSON.parse(sub.xhr.responseText);
							
							if (data.error) {
								throw new Error(data.error);
							}
							
							if (data.type !== 'FeatureCollection' || !data.features || data.features.length === 0) {
								throw new Error('ìœ íš¨í•œ GeoJSON ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.');
							}
							
							var mapConfig = app.lookup("shl1").getComponent("mapConfig");
							mapConfig.adminLevel = 'sigungu';
							mapConfig.parentSidoCode = sidoCode;
							mapConfig.targetBounds = targetBounds;
							
							addBackButton(map, 'sido');
							
							renderGeoJson(map, data, true);
							
							if (targetBounds) {
								setTimeout(function() {
									map.fitBounds(targetBounds, {
										padding: [50, 50],
										maxZoom: 12
									});
								}, 100);
							}
							
							showLoading(false);
							
						} catch (error) {
							console.error('ì‹œêµ°êµ¬ ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', error);
							alert('ì‹œêµ°êµ¬ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\n' + error.message);
							showLoading(false);
							reloadSidoData(map);
						}
					};
					var errorHandler = function(e) {
						console.error('API í˜¸ì¶œ ì‹¤íŒ¨');
						alert('API í˜¸ì¶œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
						showLoading(false);
						reloadSidoData(map);
					};
					sms1.addEventListener("submit-success", successHandler);
					sms1.addEventListener("submit-error", errorHandler);
					sms1.send();
				}
	
				/**
				 * ë™ìœ¼ë¡œ ë“œë¦´ë‹¤ìš´
				 */
				function drilldownToDong(map, sigunguCode, targetBounds) {
					var geoJsonLayer = app.lookup("shl1").getComponent("geoJsonLayer");
					if (geoJsonLayer) {
						map.removeLayer(geoJsonLayer);
					}
					showLoading(true);
					var url = '../api/map/dong.do?sigungu=' + sigunguCode;
					var sms1 = app.lookup("sms1");
					try {
						if (sms1.xhr && sms1.xhr.readyState !== 4) {
							sms1.xhr.abort();
						}
					} catch (e) {
						console.log('Previous request abort failed:', e);
					}
					sms1.removeAllEventListeners("submit-success");
					sms1.removeAllEventListeners("submit-error");
					sms1.action = url;
					var successHandler = function(e) {
						var sub = e.control;
						if (!sub.xhr.responseText) {
							showLoading(false);
							return;
						}
						
						try {
							var data = JSON.parse(sub.xhr.responseText);
							
							if (data.error) {
								throw new Error(data.error);
							}
							
							if (data.type !== 'FeatureCollection' || !data.features || data.features.length === 0) {
								throw new Error('ìœ íš¨í•œ GeoJSON ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.');
							}
							
							var mapConfig = app.lookup("shl1").getComponent("mapConfig");
							mapConfig.adminLevel = 'dong';
							mapConfig.parentSigunguCode = sigunguCode;
							mapConfig.targetBounds = targetBounds;
							
							addBackButton(map, 'sigungu');
							
							renderGeoJson(map, data, true);
							
							if (targetBounds) {
								setTimeout(function() {
									map.fitBounds(targetBounds, {
										padding: [50, 50],
										maxZoom: 14
									});
								}, 100);
							}
							
							showLoading(false);
							
						} catch (error) {
							console.error('ë™ ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', error);
							alert('ë™ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\n' + error.message);
							showLoading(false);
							
							var mapConfig = app.lookup("shl1").getComponent("mapConfig");
							if (mapConfig.parentSidoCode) {
								drilldownToSigungu(map, mapConfig.parentSidoCode);
							} else {
								reloadSidoData(map);
							}
						}
					};
					var errorHandler = function(e) {
						console.error('ë™ API í˜¸ì¶œ ì‹¤íŒ¨');
						alert('ë™ API í˜¸ì¶œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
						showLoading(false);
						var mapConfig = app.lookup("shl1").getComponent("mapConfig");
						if (mapConfig.parentSidoCode) {
							drilldownToSigungu(map, mapConfig.parentSidoCode);
						} else {
							reloadSidoData(map);
						}
					};
					sms1.addEventListener("submit-success", successHandler);
					sms1.addEventListener("submit-error", errorHandler);
					sms1.send();
				}
	
				/**
				 * ë¡œë”© í‘œì‹œ
				 */
				function showLoading(show) {
					var shl1 = app.lookup("shl1");
					if (!shl1) return;
					var loadingDiv = shl1.getComponent("loadingDiv");
					if (show) {
						if (!loadingDiv) {
							var voContent = shl1.getComponent("voContent");
							loadingDiv = document.createElement("div");
							loadingDiv.style.position = "absolute";
							loadingDiv.style.top = "0";
							loadingDiv.style.left = "0";
							loadingDiv.style.right = "0";
							loadingDiv.style.bottom = "0";
							loadingDiv.style.background = "rgba(0,0,0,0.5)";
							loadingDiv.style.display = "flex";
							loadingDiv.style.justifyContent = "center";
							loadingDiv.style.alignItems = "center";
							loadingDiv.style.zIndex = "9999";
							loadingDiv.innerHTML = '<div style="background: white; padding: 20px; border-radius: 5px;">ë¡œë”© ì¤‘...</div>';
							voContent.appendChild(loadingDiv);
							shl1.registerComponent("loadingDiv", loadingDiv);
						}
						loadingDiv.style.display = "flex";
					} else {
						if (loadingDiv) {
							loadingDiv.style.display = "none";
						}
					}
				}
	
				/**
				 * ê³µê°œ API í•¨ìˆ˜ë“¤
				 */
				function setZoomLevel(level) {
					var map = app.lookup("shl1").getComponent("leafletMap");
					if (map) {
						map.setZoom(level);
					}
				}
	
				function setMapCenter(lat, lng, zoom) {
					var map = app.lookup("shl1").getComponent("leafletMap");
					if (map) {
						map.setView([lat, lng], zoom || map.getZoom());
					}
				}
	
				function focusOnRegion(regionCode) {
					var geoJsonLayer = app.lookup("shl1").getComponent("geoJsonLayer");
					if (geoJsonLayer) {
						geoJsonLayer.eachLayer(function(layer) {
							var props = layer.feature.properties;
							var code = props.ctprvn_cd || props.sig_cd;
							if (code === regionCode) {
								var bounds = layer.getBounds();
								var map = app.lookup("shl1").getComponent("leafletMap");
								map.fitBounds(bounds);
								layer.openPopup();
							}
						});
					}
				}
	
				function onMapRegionClick(regionData) {
					console.log("ì§€ì—­(ë™) í´ë¦­: " + regionData);
					openTooltipEditor(regionData);
				}
	
				function openTooltipEditor(regionData) {
					removeTooltipEditor();
					var editor = document.createElement("div");
					editor.id = "tooltip-editor";
					editor.style.position = "absolute";
					editor.style.top = "20px";
					editor.style.right = "20px";
					editor.style.width = "260px";
					editor.style.background = "#fff";
					editor.style.borderRadius = "8px";
					editor.style.boxShadow = "0 4px 12px rgba(0,0,0,0.3)";
					editor.style.padding = "12px";
					editor.style.zIndex = "10000";
					editor.style.fontSize = "13px";
					
					editor.innerHTML =
						'<h4 style="margin:0 0 10px 0;">' + regionData.name + '</h4>' +
						'<label>íˆ´íŒ ë‚´ìš©</label>' +
						'<textarea id="tt-text" style="width:100%; height:60px;"></textarea>' +
						'<label>ë°°ê²½ìƒ‰</label>' +
						'<input type="color" id="tt-bg" value="#333333"/>' +
						'<label>ê¸€ììƒ‰</label>' +
						'<input type="color" id="tt-color" value="#ffffff"/>' +
						'<label>ì§€ì—­ ìƒ‰ìƒ</label>' +
						'<input type="color" id="region-color"/>' +
						'<div style="margin-top:10px; text-align:right;">' +
						'<button id="tt-save">ì ìš©</button>' +
						'<button id="tt-close">ë‹«ê¸°</button>' +
						'</div>';
					
					document.body.appendChild(editor);
					
					editor.querySelector("#tt-save").onclick = function() {
						applyTooltipChange(regionData);
					};
					
					editor.querySelector("#tt-close").onclick = removeTooltipEditor;
				}
	
				function removeTooltipEditor() {
					var el = document.getElementById("tooltip-editor");
					if (el) el.remove();
				}
	
				function applyTooltipChange(regionData) {
					var text = document.getElementById("tt-text").value;
					var bg = document.getElementById("tt-bg").value;
					var color = document.getElementById("tt-color").value;
					var regionColor = document.getElementById("region-color").value;
					var tooltipHTML =
						'<div style="' +
						'background:' + bg + ';' +
						'color:' + color + ';' +
						'padding:8px 10px;' +
						'border-radius:6px;' +
						'font-size:12px;' +
						'box-shadow:0 2px 6px rgba(0,0,0,0.3);' +
						'">' +
						'<strong>' + regionData.name + '</strong><br/>' +
						text +
						'</div>';
					
					setCustomTooltip(regionData.code, tooltipHTML);
					
					if (regionColor) {
						updateRegionColor(regionData.code, regionColor);
					}
					
					removeTooltipEditor();
				}
	
				function resetMapView() {
					var map = app.lookup("shl1").getComponent("leafletMap");
					if (map) {
						map.setView([36.5, 127.5], 7);
					}
				}
	
				function updateRegionColor(regionCode, color) {
					var shl1 = app.lookup("shl1");
					var mapConfig = shl1.getComponent("mapConfig");
					var dataValues = mapConfig.dataValues || [];
					var found = false;
					for (var i = 0; i < dataValues.length; i++) {
						if (dataValues[i].code === regionCode) {
							dataValues[i].color = color;
							found = true;
							break;
						}
					}
					
					if (!found) {
						dataValues.push({
							code: regionCode,
							color: color
						});
					}
					
					var geoJsonLayer = shl1.getComponent("geoJsonLayer");
					
					if (geoJsonLayer) {
						geoJsonLayer.eachLayer(function(layer) {
							var props = layer.feature.properties;
							var code = props.ctprvn_cd || props.sig_cd || props.emd_cd;
							
							if (code === regionCode) {
								layer.setStyle({
									fillColor: color
								});
							}
						});
					}
				}
	
				function updateRegionLabel(regionCode, labelText, options) {
					var shl1 = app.lookup("shl1");
					var mapConfig = shl1.getComponent("mapConfig");
					var labels = mapConfig.labels || [];
					var labelMarkers = shl1.getComponent("labelMarkers") || [];
					labelMarkers.forEach(function(marker) {
						marker.remove();
					});
					shl1.registerComponent("labelMarkers", []);
					
					var found = false;
					for (var i = 0; i < labels.length; i++) {
						if (labels[i].code === regionCode) {
							labels[i].label = labelText;
							if (options) {
								labels[i].fontSize = options.fontSize || labels[i].fontSize;
								labels[i].color = options.color || labels[i].color;
							}
							found = true;
							break;
						}
					}
					
					if (!found) {
						labels.push({
							code: regionCode,
							label: labelText,
							fontSize: options ? options.fontSize : '12px',
							color: options ? options.color : '#333'
						});
					}
					
					var map = shl1.getComponent("leafletMap");
					var geoJsonLayer = shl1.getComponent("geoJsonLayer");
					
					if (geoJsonLayer) {
						geoJsonLayer.eachLayer(function(layer) {
							var props = layer.feature.properties;
							var code = props.ctprvn_cd || props.sig_cd || props.emd_cd;
							
							if (code === regionCode) {
								var bounds = layer.getBounds();
								var center = bounds.getCenter();
								
								var labelItem;
								for (var i = 0; i < labels.length; i++) {
									if (labels[i].code === regionCode) {
										labelItem = labels[i];
										break;
									}
								}
								
								if (labelItem) {
									var labelIcon = L.divIcon({
										className: 'region-label',
										html: '<div style="' +
											'font-size: ' + (labelItem.fontSize || '12px') + ';' +
											'color: ' + (labelItem.color || '#333') + ';' +
											'font-weight: bold;' +
											'text-align: center;' +
											'white-space: nowrap;' +
											'text-shadow: 1px 1px 2px white, -1px -1px 2px white;' +
											'">' + labelItem.label + '</div>',
										iconSize: null
									});
									
									var labelMarker = L.marker(center, {
										icon: labelIcon,
										interactive: false,
										zIndexOffset: 1000
									});
									
									labelMarker.addTo(map);
									
									if (!shl1.getComponent("labelMarkers")) {
										shl1.registerComponent("labelMarkers", []);
									}
									shl1.getComponent("labelMarkers").push(labelMarker);
								}
							}
						});
					}
				}
	
				function setCustomTooltip(regionCode, tooltipHTML) {
					var shl1 = app.lookup("shl1");
					var mapConfig = shl1.getComponent("mapConfig");
					if (!mapConfig.customTooltips) {
						mapConfig.customTooltips = {};
					}
					
					mapConfig.customTooltips[regionCode] = tooltipHTML;
					
					var geoJsonLayer = shl1.getComponent("geoJsonLayer");
					if (geoJsonLayer) {
						geoJsonLayer.eachLayer(function(layer) {
							var props = layer.feature.properties;
							var code = props.ctprvn_cd || props.sig_cd || props.emd_cd;
							
							if (code === regionCode) {
								layer.unbindTooltip();
								layer.bindTooltip(tooltipHTML, {
									permanent: false,
									direction: 'center',
									className: 'custom-tooltip'
								});
							}
						});
					}
				}
	
				function setHoverColor(regionCode, color) {
					var shl1 = app.lookup("shl1");
					var mapConfig = shl1.getComponent("mapConfig");
					if (!mapConfig.hoverColors) {
						mapConfig.hoverColors = {};
					}
					
					mapConfig.hoverColors[regionCode] = color;
				}
	
				function addBackButton(map, targetLevel) {
					var existingBackButton = app.lookup("shl1").getComponent("backButton");
					if (existingBackButton) {
						map.removeControl(existingBackButton);
					}
					var backButton = L.control({
						position: 'topleft'
					});
					
					backButton.onAdd = function() {
						var div = L.DomUtil.create('div', 'back-button');
						div.style.background = 'white';
						div.style.padding = '10px 15px';
						div.style.borderRadius = '5px';
						div.style.boxShadow = '0 2px 5px rgba(0,0,0,0.2)';
						div.style.cursor = 'pointer';
						div.style.marginTop = '10px';
						
						if (targetLevel === 'sido') {
							div.innerHTML = 'â† ì‹œë„ ì§€ë„ë¡œ ëŒì•„ê°€ê¸°';
						} else if (targetLevel === 'sigungu') {
							div.innerHTML = 'â† ì‹œêµ°êµ¬ ì§€ë„ë¡œ ëŒì•„ê°€ê¸°';
						}
						
						div.onclick = function() {
							if (targetLevel === 'sido') {
								reloadSidoData(map);
							} else if (targetLevel === 'sigungu') {
								var mapConfig = app.lookup("shl1").getComponent("mapConfig");
								if (mapConfig.parentSidoCode) {
									drilldownToSigungu(map, mapConfig.parentSidoCode);
								} else {
									reloadSidoData(map);
								}
							}
						};
						
						L.DomEvent.disableClickPropagation(div);
						
						return div;
					};
					
					backButton.addTo(map);
					app.lookup("shl1").registerComponent("backButton", backButton);
				}
	
				function reloadSidoData(map) {
					var geoJsonLayer = app.lookup("shl1").getComponent("geoJsonLayer");
					if (geoJsonLayer) {
						map.removeLayer(geoJsonLayer);
					}
					var backButton = app.lookup("shl1").getComponent("backButton");
					if (backButton) {
						map.removeControl(backButton);
					}
					
					var mapConfig = app.lookup("shl1").getComponent("mapConfig");
					mapConfig.adminLevel = 'sido';
					mapConfig.parentSidoCode = null;
					mapConfig.parentSigunguCode = null;
					mapConfig.targetBounds = null;
					
					map.setView([36.5, 127.5], 7);
					
					var vsApiUrl = mapConfig.apiUrl || "http://localhost:8080";
					
					showLoading(true);
					
					var sms1 = app.lookup("sms1");
					
					try {
						if (sms1.xhr && sms1.xhr.readyState !== 4) {
							sms1.xhr.abort();
						}
					} catch (e) {
						console.log('Previous request abort failed:', e);
					}
					
					sms1.removeAllEventListeners("submit-success");
					sms1.removeAllEventListeners("submit-error");
					
					var url = vsApiUrl + '/api/map/sido.do';
					sms1.action = url;
					
					var successHandler = function(e) {
						var sub = e.control;
						
						if (!sub.xhr.responseText) {
							showLoading(false);
							return;
						}
						
						try {
							var data = JSON.parse(sub.xhr.responseText);
							
							if (data.error) {
								throw new Error(data.error);
							}
							
							if (data.type !== 'FeatureCollection' || !data.features || data.features.length === 0) {
								throw new Error('ìœ íš¨í•œ GeoJSON ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.');
							}
							
							renderGeoJson(map, data, app.getAppProperty("showTooltip") !== false);
							showLoading(false);
							
						} catch (error) {
							console.error('ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', error);
							alert('ì§€ë„ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\n' + error.message);
							showLoading(false);
						}
					};
					
					var errorHandler = function(e) {
						console.error('API í˜¸ì¶œ ì‹¤íŒ¨');
						alert('API í˜¸ì¶œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
						showLoading(false);
					};
					
					sms1.addEventListener("submit-success", successHandler);
					sms1.addEventListener("submit-error", errorHandler);
					
					sms1.send();
				}
	
				/************************************************
				 * [NEW] Interactive Drawing Functions
				 ************************************************/
	
				/**
				 * ê·¸ë¦¬ê¸° íˆ´ë°” ìƒì„±
				 */
				function addDrawingToolbar(map) {
					var toolbar = L.control({
						position: 'topright'
					});
	
					toolbar.onAdd = function() {
						var div = L.DomUtil.create('div', 'drawing-toolbar');
						div.style.background = 'white';
						div.style.padding = '5px';
						div.style.borderRadius = '5px';
						div.style.boxShadow = '0 2px 5px rgba(0,0,0,0.3)';
						div.style.display = 'flex';
						div.style.flexDirection = 'column';
						div.style.gap = '5px';
	
						var buttons = [{
								id: 'marker',
								label: 'ğŸ“ ë§ˆì»¤',
								title: 'ë§ˆì»¤ ì¶”ê°€'
							},
							{
								id: 'polyline',
								label: 'â– ê²½ë¡œ',
								title: 'ê²½ë¡œ ê·¸ë¦¬ê¸° (í´ë¦­ìœ¼ë¡œ ì‹œì‘/ì¶”ê°€, ë”ë¸”í´ë¦­ ì¢…ë£Œ)'
							},
							{
								id: 'image',
								label: 'ğŸ–¼ ì´ë¯¸ì§€',
								title: 'ì´ë¯¸ì§€ ë§ˆì»¤ ì¶”ê°€'
							},
							{
								id: 'panel',
								label: 'ğŸ“„ íŒ¨ë„',
								title: 'ì •ë³´ íŒ¨ë„ ì¶”ê°€'
							},
							{
								id: 'sparkline',
								label: 'ğŸ“ˆ ì°¨íŠ¸',
								title: 'ìŠ¤íŒŒí¬ ì°¨íŠ¸ ì¶”ê°€'
							},
							{
								id: 'cancel',
								label: 'âŒ ì·¨ì†Œ',
								title: 'ê·¸ë¦¬ê¸° ì·¨ì†Œ'
							}
						];
	
						buttons.forEach(function(btn) {
							var button = document.createElement('button');
							button.innerHTML = btn.label;
							button.title = btn.title;
							button.style.border = '1px solid #ddd';
							button.style.background = '#f9f9f9';
							button.style.padding = '8px 10px';
							button.style.cursor = 'pointer';
							button.style.borderRadius = '3px';
							button.style.fontSize = '12px';
							button.style.width = '100%';
							button.style.textAlign = 'left';
	
							button.onclick = function(e) {
								L.DomEvent.stopPropagation(e);
								if (btn.id === 'cancel') {
									setDrawingMode(map, null);
								} else {
									setDrawingMode(map, btn.id);
								}
							};
	
							div.appendChild(button);
						});
	
						return div;
					};
	
					toolbar.addTo(map);
					app.lookup("shl1").registerComponent("drawingToolbar", toolbar);
				}
	
				/**
				 * ê·¸ë¦¬ê¸° ëª¨ë“œ ì„¤ì •
				 */
				function setDrawingMode(map, mode) {
					// ê¸°ì¡´ ì„ì‹œ ë¼ì¸ ì •ë¦¬
					if (drawState.tempPolyline) {
						map.removeLayer(drawState.tempPolyline);
						drawState.tempPolyline = null;
						drawState.points = [];
					}
	
					drawState.mode = mode;
					
					// ì»¤ì„œ ìŠ¤íƒ€ì¼ ë³€ê²½
					var container = map.getContainer();
					if (mode) {
						container.style.cursor = 'crosshair';
						console.log("ê·¸ë¦¬ê¸° ëª¨ë“œ í™œì„±í™”: " + mode);
					} else {
						container.style.cursor = '';
						console.log("ê·¸ë¦¬ê¸° ëª¨ë“œ ì·¨ì†Œ");
					}
				}
	
				/**
				 * ì§€ë„ í´ë¦­ í•¸ë“¤ëŸ¬ (ê·¸ë¦¬ê¸° ëª¨ë“œ ë¶„ê¸°)
				 */
				function handleMapClick(map, e) {
					if (!drawState.mode) return;
	
					var lat = e.latlng.lat;
					var lng = e.latlng.lng;
	
					if (drawState.mode === 'marker') {
						openInputModal('ë§ˆì»¤ ìƒì„±', [{
							id: 'popup',
							label: 'íŒì—… ë‚´ìš©',
							type: 'text'
						}], function(data) {
							addMarkers(map, [{
								lat: lat,
								lng: lng,
								popup: data.popup
							}]);
							setDrawingMode(map, null);
						});
					} else if (drawState.mode === 'polyline') {
						drawState.points.push([lat, lng]);
						
						if (!drawState.tempPolyline) {
							drawState.tempPolyline = L.polyline(drawState.points, {color: 'red'}).addTo(map);
						} else {
							drawState.tempPolyline.setLatLngs(drawState.points);
						}
					} else if (drawState.mode === 'image') {
						openInputModal('ì´ë¯¸ì§€ ì¶”ê°€', [{
								id: 'url',
								label: 'ì´ë¯¸ì§€ URL',
								type: 'text',
								value: 'https://cdn-icons-png.flaticon.com/512/2776/2776067.png'
							},
							{
								id: 'width',
								label: 'ë„ˆë¹„ (px)',
								type: 'number',
								value: '50'
							},
							{
								id: 'height',
								label: 'ë†’ì´ (px)',
								type: 'number',
								value: '50'
							}
						], function(data) {
							addCustomImages(map, [{
								lat: lat,
								lng: lng,
								url: data.url,
								size: [parseInt(data.width), parseInt(data.height)]
							}]);
							setDrawingMode(map, null);
						});
					} else if (drawState.mode === 'panel') {
						openInputModal('íŒ¨ë„ ì¶”ê°€', [{
								id: 'title',
								label: 'ì œëª©',
								type: 'text'
							},
							{
								id: 'content',
								label: 'HTML ë‚´ìš©',
								type: 'textarea'
							}
						], function(data) {
							addPanels(map, [{
								lat: lat,
								lng: lng,
								title: data.title,
								content: data.content
							}]);
							setDrawingMode(map, null);
						});
					} else if (drawState.mode === 'sparkline') {
						openInputModal('ìŠ¤íŒŒí¬ ì°¨íŠ¸ ì¶”ê°€', [{
								id: 'data',
								label: 'ë°ì´í„° (ì‰¼í‘œë¡œ êµ¬ë¶„, ì˜ˆ: 10,20,15,30)',
								type: 'text'
							},
							{
								id: 'label',
								label: 'ë¼ë²¨',
								type: 'text'
							}
						], function(data) {
							var dataArr = data.data.split(',').map(Number);
							addSparkCharts(map, [{
								lat: lat,
								lng: lng,
								data: dataArr,
								label: data.label,
								width: 100,
								height: 40,
								color: 'red'
							}]);
							setDrawingMode(map, null);
						});
					}
				}
	
				/**
				 * ê²½ë¡œ ê·¸ë¦¬ê¸° ì¢…ë£Œ
				 */
				function finishPolyline(map) {
					if (drawState.mode === 'polyline' && drawState.points.length > 1) {
						var points = drawState.points; // ë³µì‚¬
						openInputModal('ê²½ë¡œ ì„¤ì •', [{id: 'color', label: 'ìƒ‰ìƒ', type: 'color', value: '#e74c3c'}], function(data){
							addPolylines(map, [{
								points: points,
								color: data.color,
								weight: 4
							}]);
							setDrawingMode(map, null);
						}, function(){
							// ì·¨ì†Œ ì‹œ
							if(drawState.tempPolyline) map.removeLayer(drawState.tempPolyline);
							setDrawingMode(map, null);
						});
					} else {
						setDrawingMode(map, null);
					}
				}
	
				/**
				 * ê³µí†µ ì…ë ¥ ëª¨ë‹¬ ìƒì„±
				 */
				function openInputModal(title, fields, onConfirm, onCancel) {
					var modal = document.createElement("div");
					modal.style.position = "fixed";
					modal.style.top = "50%";
					modal.style.left = "50%";
					modal.style.transform = "translate(-50%, -50%)";
					modal.style.background = "white";
					modal.style.padding = "20px";
					modal.style.zIndex = "10001";
					modal.style.boxShadow = "0 5px 15px rgba(0,0,0,0.5)";
					modal.style.borderRadius = "5px";
					modal.style.width = "300px";
	
					var html = '<h3 style="margin-top:0">' + title + '</h3>';
					
					fields.forEach(function(f) {
						html += '<div style="margin-bottom:10px;">';
						html += '<label style="display:block;font-size:12px;color:#666;">' + f.label + '</label>';
						if(f.type === 'textarea') {
							html += '<textarea id="input-' + f.id + '" style="width:100%;height:60px;">' + (f.value || '') + '</textarea>';
						} else if (f.type === 'color') {
							html += '<input type="color" id="input-' + f.id + '" value="' + (f.value || '#000000') + '" style="width:100%;">';
						} else {
							html += '<input type="' + (f.type || 'text') + '" id="input-' + f.id + '" value="' + (f.value || '') + '" style="width:100%;padding:5px;box-sizing:border-box;">';
						}
						html += '</div>';
					});
	
					html += '<div style="text-align:right;margin-top:15px;">';
					html += '<button id="modal-ok" style="padding:5px 15px;background:#3498db;color:white;border:none;border-radius:3px;margin-right:5px;cursor:pointer;">í™•ì¸</button>';
					html += '<button id="modal-cancel" style="padding:5px 10px;background:#ddd;border:none;border-radius:3px;cursor:pointer;">ì·¨ì†Œ</button>';
					html += '</div>';
	
					modal.innerHTML = html;
					document.body.appendChild(modal);
	
					modal.querySelector('#modal-ok').onclick = function() {
						var result = {};
						fields.forEach(function(f) {
							result[f.id] = document.getElementById('input-' + f.id).value;
						});
						document.body.removeChild(modal);
						if (onConfirm) onConfirm(result);
					};
	
					modal.querySelector('#modal-cancel').onclick = function() {
						document.body.removeChild(modal);
						if(onCancel) onCancel();
						else if(drawState.mode) setDrawingMode(app.lookup("shl1").getComponent("leafletMap"), null);
					};
				}
				// End - User Script
				
				// Header
				app.declareAppProperty("dataSet", null);
				app.declareBindableAppProperty("title", null);
				app.declareBindableAppProperty("titlePosition", "top-left");
				app.declareBindableAppProperty("showTooltip", true);
				app.declareBindableAppProperty("itemColNm", "ITEM");
				app.declareBindableAppProperty("valueColNm", "VALUE");
				var submission_1 = new cpr.protocols.Submission("sms1");
				submission_1.method = "get";
				submission_1.action = "../api/map/sido.do";
				app.register(submission_1);
				app.supportMedia("all", "EXB-FULL");
				
				// Configure root container
				var container = app.getContainer();
				container.style.css({
					"width" : "100%",
					"top" : "0px",
					"height" : "100%",
					"left" : "0px"
				});
				
				// Layout
				var xYLayout_1 = new cpr.controls.layouts.XYLayout();
				xYLayout_1.scrollable = false;
				container.setLayout(xYLayout_1);
				
				// UI Configuration
				var uIControlShell_1 = new cpr.controls.UIControlShell("shl1");
				if(typeof onShl1Init == "function") {
					uIControlShell_1.addEventListener("init", onShl1Init);
				}
				if(typeof onShl1Load == "function") {
					uIControlShell_1.addEventListener("load", onShl1Load);
				}
				container.addChild(uIControlShell_1, {
					"top": "0px",
					"right": "0px",
					"bottom": "0px",
					"left": "0px"
				});
			}
		});
	internalApp.title = "ë§µì°¨íŠ¸ ì˜ˆì‹œ";
	
	// Type declaration for udcMapEx
	cpr.utils.Util.ensurePackage("udc").udcMapEx = function(id){
		cpr.controls.UDCBase.call(this, "udc.udcMapEx", internalApp, id);
	};
	
	udc.udcMapEx.prototype = Object.create(cpr.controls.UDCBase.prototype);
	Object.defineProperty(udc.udcMapEx.prototype, "type", {
		get : function(){
			return "udc.udcMapEx";
		},
		
		configurable: true
	});
	
	// App Properties
	Object.defineProperty(udc.udcMapEx.prototype, "dataSet", {
		get: function(){
			return this.getEmbeddedAppInstance().getAppProperty("dataSet");
		},
		set: function(newValue){
			return this.getEmbeddedAppInstance().setAppProperty("dataSet", newValue, true);
		}
	});
	Object.defineProperty(udc.udcMapEx.prototype, "title", {
		get: function(){
			return this.getEmbeddedAppInstance().getAppProperty("title");
		},
		set: function(newValue){
			return this.getEmbeddedAppInstance().setAppProperty("title", newValue, true);
		}
	});
	Object.defineProperty(udc.udcMapEx.prototype, "titlePosition", {
		get: function(){
			return this.getEmbeddedAppInstance().getAppProperty("titlePosition");
		},
		set: function(newValue){
			return this.getEmbeddedAppInstance().setAppProperty("titlePosition", newValue, true);
		}
	});
	Object.defineProperty(udc.udcMapEx.prototype, "showTooltip", {
		get: function(){
			return this.getEmbeddedAppInstance().getAppProperty("showTooltip");
		},
		set: function(newValue){
			return this.getEmbeddedAppInstance().setAppProperty("showTooltip", newValue, true);
		}
	});
	Object.defineProperty(udc.udcMapEx.prototype, "itemColNm", {
		get: function(){
			return this.getEmbeddedAppInstance().getAppProperty("itemColNm");
		},
		set: function(newValue){
			return this.getEmbeddedAppInstance().setAppProperty("itemColNm", newValue, true);
		}
	});
	Object.defineProperty(udc.udcMapEx.prototype, "valueColNm", {
		get: function(){
			return this.getEmbeddedAppInstance().getAppProperty("valueColNm");
		},
		set: function(newValue){
			return this.getEmbeddedAppInstance().setAppProperty("valueColNm", newValue, true);
		}
	});
	
	// Register type into the Platform and package
	cpr.core.Platform.INSTANCE.register(internalApp);
})();
/// end - udc.udcMapEx
